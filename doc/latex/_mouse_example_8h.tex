\hypertarget{_mouse_example_8h}{}\section{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Mouse\+Example.h File Reference}
\label{_mouse_example_8h}\index{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Mouse\+Example.\+h@{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Mouse\+Example.\+h}}
{\ttfamily \#include \char`\"{}Ctracker.\+h\char`\"{}}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
Include dependency graph for Mouse\+Example.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_mouse_example_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{_mouse_example_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_mouse_example_8h_a564d93e793093019106496f397f28483}{mv\+\_\+\+Mouse\+Callback}} (int event, int x, int y, int, void $\ast$param)
\item 
void \mbox{\hyperlink{_mouse_example_8h_a010fc67e0e1f4693e517c2ac599b0d94}{Mouse\+Tracking}} (cv\+::\+Command\+Line\+Parser parser)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{_mouse_example_8h_a010fc67e0e1f4693e517c2ac599b0d94}\label{_mouse_example_8h_a010fc67e0e1f4693e517c2ac599b0d94}} 
\index{Mouse\+Example.\+h@{Mouse\+Example.\+h}!Mouse\+Tracking@{Mouse\+Tracking}}
\index{Mouse\+Tracking@{Mouse\+Tracking}!Mouse\+Example.\+h@{Mouse\+Example.\+h}}
\subsubsection{\texorpdfstring{Mouse\+Tracking()}{MouseTracking()}}
{\footnotesize\ttfamily void Mouse\+Tracking (\begin{DoxyParamCaption}\item[{cv\+::\+Command\+Line\+Parser}]{parser }\end{DoxyParamCaption})}



Definition at line 25 of file Mouse\+Example.\+h.


\begin{DoxyCode}
26 \{
27     std::string outFile = parser.get<std::string>(\textcolor{stringliteral}{"out"});
28 
29     cv::VideoWriter writer;
30 
31     \textcolor{keywordtype}{int} k = 0;
32     std::vector<cv::Scalar> colors = \{ cv::Scalar(255, 0, 0), cv::Scalar(0, 255, 0), cv::Scalar(0, 0, 255),
       cv::Scalar(255, 255, 0), cv::Scalar(0, 255, 255), cv::Scalar(255, 0, 255), cv::Scalar(255, 127, 255), 
      cv::Scalar(127, 0, 255), cv::Scalar(127, 0, 127) \};
33     cv::namedWindow(\textcolor{stringliteral}{"Video"});
34     cv::Mat frame = cv::Mat(800, 800, CV\_8UC3);
35 
36     \textcolor{keywordflow}{if} (!writer.isOpened())
37     \{
38         writer.open(outFile, cv::VideoWriter::fourcc(\textcolor{charliteral}{'P'}, \textcolor{charliteral}{'I'}, \textcolor{charliteral}{'M'}, \textcolor{charliteral}{'1'}), 20, frame.size(), \textcolor{keyword}{true});
39     \}
40 
41     \textcolor{comment}{// Set mouse callback}
42     cv::Point2f pointXY;
43     cv::setMouseCallback(\textcolor{stringliteral}{"Video"}, \mbox{\hyperlink{_mouse_example_8h_a564d93e793093019106496f397f28483}{mv\_MouseCallback}}, (\textcolor{keywordtype}{void}*)&pointXY);
44 
45     \textcolor{keywordtype}{bool} useLocalTracking = \textcolor{keyword}{false};
46 
47     \mbox{\hyperlink{struct_tracker_settings}{TrackerSettings}} settings;
48     settings.\mbox{\hyperlink{struct_tracker_settings_a64f4e2f0b2eaeae47316690ab5a5e620}{m\_useLocalTracking}} = useLocalTracking;
49     settings.\mbox{\hyperlink{struct_tracker_settings_a2633bd68c2d482a666a5d4bba580cca0}{m\_distType}} = \mbox{\hyperlink{namespacetracking_a55743c5e18b9b228c4ba2587260b2502a30176bdc0b4f965c6812767a2fa52e1e}{tracking::DistCenters}};
50     settings.\mbox{\hyperlink{struct_tracker_settings_a3856a809067135c1c3f2d3c61fc4d6b7}{m\_kalmanType}} = \mbox{\hyperlink{namespacetracking_a83f2c4d58ea2737f7d6296dce3eb722aa889eca583e371386c92e05814797a885}{tracking::KalmanLinear}};
51     settings.\mbox{\hyperlink{struct_tracker_settings_afd6c83aa8b0eaa4f131f45852a0b89e4}{m\_filterGoal}} = \mbox{\hyperlink{namespacetracking_a9b3e7d16c86cd8b781ab214e396b0ebfafac394783c1196957768400bc53ba491}{tracking::FilterCenter}};
52     settings.\mbox{\hyperlink{struct_tracker_settings_a61a59f1c5bcc2ee76cef1b174d4bb8a4}{m\_lostTrackType}} = \mbox{\hyperlink{namespacetracking_a5377d69122ad915004ef68a518d22be3a3bd92892a83828375b9fce502732c491}{tracking::TrackNone}};
53     settings.\mbox{\hyperlink{struct_tracker_settings_a94a05cbda5eeeac7fa1b64baf9c703f5}{m\_matchType}} = \mbox{\hyperlink{namespacetracking_a491e50c9261ab820965d871a217d4f13a8c97315e46df8c0716a9538655fc967d}{tracking::MatchHungrian}};
54     settings.\mbox{\hyperlink{struct_tracker_settings_ae876ad4f3599a782cddb37e318430aaa}{m\_dt}} = 0.2f;
55     settings.\mbox{\hyperlink{struct_tracker_settings_a9d4bcf1b68d5a13de8f9fea89f3b694f}{m\_accelNoiseMag}} = 0.5f;
56     settings.\mbox{\hyperlink{struct_tracker_settings_a10e76ae03bd840f6c9180ce67faaa83c}{m\_distThres}} = 100.0f;
57     settings.\mbox{\hyperlink{struct_tracker_settings_a7825c3e88ee979fba2844c238fc51139}{m\_maximumAllowedSkippedFrames}} = 25;
58     settings.\mbox{\hyperlink{struct_tracker_settings_abc7ce62dfe8de5ae33506aac41fddcac}{m\_maxTraceLength}} = 25;
59 
60     \mbox{\hyperlink{class_c_tracker}{CTracker}} tracker(settings);
61 
62     \mbox{\hyperlink{defines_8h_a7ce9c8817b42ab418e61756f579549ab}{track\_t}} alpha = 0;
63     cv::RNG rng;
64     \textcolor{keywordflow}{while} (k != 27)
65     \{
66         frame = cv::Scalar::all(0);
67 
68         \textcolor{comment}{// Noise addition (measurements/detections simulation )}
69         \textcolor{keywordtype}{float} Xmeasured = pointXY.x + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(rng.gaussian(2.0));
70         \textcolor{keywordtype}{float} Ymeasured = pointXY.y + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(rng.gaussian(2.0));
71 
72         \textcolor{comment}{// Append circulating around mouse cv::Points (frequently intersecting)}
73         std::vector<Point\_t> pts;
74         pts.push\_back(\mbox{\hyperlink{defines_8h_a8c42696da8f098b91374a8e8bb84b430}{Point\_t}}(Xmeasured + 100.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*sin(-alpha), Ymeasured + 100.0
      \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*cos(-alpha)));
75         pts.push\_back(\mbox{\hyperlink{defines_8h_a8c42696da8f098b91374a8e8bb84b430}{Point\_t}}(Xmeasured + 100.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*sin(alpha), Ymeasured + 100.0
      \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*cos(alpha)));
76         pts.push\_back(\mbox{\hyperlink{defines_8h_a8c42696da8f098b91374a8e8bb84b430}{Point\_t}}(Xmeasured + 100.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*sin(alpha / 2.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}), Ymeasured + 100.0
      \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*cos(alpha / 2.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})));
77         pts.push\_back(\mbox{\hyperlink{defines_8h_a8c42696da8f098b91374a8e8bb84b430}{Point\_t}}(Xmeasured + 100.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*sin(alpha / 3.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}), Ymeasured + 100.0
      \mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}*cos(alpha / 1.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})));
78         alpha += 0.05f;
79 
80         \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\_t}} regions;
81         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} p : pts)
82         \{
83             regions.push\_back(\mbox{\hyperlink{class_c_region}{CRegion}}(cv::Rect(cvRound(p.x), cvRound(p.y), 1, 1)));
84         \}
85 
86 
87         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < pts.size(); i++)
88         \{
89             cv::circle(frame, pts[i], 3, cv::Scalar(0, 255, 0), 1, CV\_AA);
90         \}
91 
92         tracker.Update(regions, cv::UMat(), 100);
93 
94         std::cout << tracker.tracks.size() << std::endl;
95 
96         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < tracker.tracks.size(); i++)
97         \{
98             \textcolor{keyword}{const} \textcolor{keyword}{auto}& track = tracker.tracks[i];
99 
100             \textcolor{keywordflow}{if} (track->m\_trace.size() > 1)
101             \{
102                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < track->m\_trace.size() - 1; j++)
103                 \{
104                     cv::line(frame, track->m\_trace[j], track->m\_trace[j + 1], colors[i % colors.size()], 2,
       CV\_AA);
105                 \}
106             \}
107         \}
108 
109         cv::imshow(\textcolor{stringliteral}{"Video"}, frame);
110 
111         \textcolor{keywordflow}{if} (writer.isOpened())
112         \{
113             writer << frame;
114         \}
115 
116         k = cv::waitKey(10);
117     \}
118 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_mouse_example_8h_a010fc67e0e1f4693e517c2ac599b0d94_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{_mouse_example_8h_a010fc67e0e1f4693e517c2ac599b0d94_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{_mouse_example_8h_a564d93e793093019106496f397f28483}\label{_mouse_example_8h_a564d93e793093019106496f397f28483}} 
\index{Mouse\+Example.\+h@{Mouse\+Example.\+h}!mv\+\_\+\+Mouse\+Callback@{mv\+\_\+\+Mouse\+Callback}}
\index{mv\+\_\+\+Mouse\+Callback@{mv\+\_\+\+Mouse\+Callback}!Mouse\+Example.\+h@{Mouse\+Example.\+h}}
\subsubsection{\texorpdfstring{mv\+\_\+\+Mouse\+Callback()}{mv\_MouseCallback()}}
{\footnotesize\ttfamily void mv\+\_\+\+Mouse\+Callback (\begin{DoxyParamCaption}\item[{int}]{event,  }\item[{int}]{x,  }\item[{int}]{y,  }\item[{int}]{,  }\item[{void $\ast$}]{param }\end{DoxyParamCaption})}



Definition at line 11 of file Mouse\+Example.\+h.


\begin{DoxyCode}
12 \{
13     \textcolor{keywordflow}{if} (event == cv::EVENT\_MOUSEMOVE)
14     \{
15         cv::Point2f* p = (cv::Point2f*)param;
16         \textcolor{keywordflow}{if} (p)
17         \{
18             p->x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(x);
19             p->y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(y);
20         \}
21     \}
22 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_mouse_example_8h_a564d93e793093019106496f397f28483_icgraph}
\end{center}
\end{figure}
