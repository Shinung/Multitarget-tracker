\hypertarget{c4-pedestrian-detector_8cpp}{}\section{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/pedestrians/c4-\/pedestrian-\/detector.cpp File Reference}
\label{c4-pedestrian-detector_8cpp}\index{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/pedestrians/c4-\/pedestrian-\/detector.\+cpp@{D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/pedestrians/c4-\/pedestrian-\/detector.\+cpp}}
{\ttfamily \#include \char`\"{}c4-\/pedestrian-\/detector.\+h\char`\"{}}\newline
Include dependency graph for c4-\/pedestrian-\/detector.cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{c4-pedestrian-detector_8cpp_a205804b2ee8558313222a898513a9543}{Compute\+CT}} (\mbox{\hyperlink{class_int_image}{Int\+Image}}$<$ double $>$ \&original, \mbox{\hyperlink{class_int_image}{Int\+Image}}$<$ int $>$ \&ct)
\item 
double \mbox{\hyperlink{c4-pedestrian-detector_8cpp_a1a25c5eeb6b4917c272b201ff023ba68}{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}} (const char $\ast$modelfile, const int m, \mbox{\hyperlink{class_array2d_c}{Array2dC}}$<$ double $>$ \&result)
\item 
double \mbox{\hyperlink{c4-pedestrian-detector_8cpp_a891356b11fe09e40a8b2993bc8d00c01}{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}} (const char $\ast$modelfile, const int m, const int upper\+\_\+bound, \mbox{\hyperlink{class_array2d_c}{Array2dC}}$<$ double $>$ \&result)
\item 
void \mbox{\hyperlink{c4-pedestrian-detector_8cpp_a1c2c730891bb9a5800d3761e8cfaa160}{Load\+Cascade}} (std\+::string cascade1, std\+::string cascade2, \mbox{\hyperlink{class_detection_scanner}{Detection\+Scanner}} \&ds)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{c4-pedestrian-detector_8cpp_a205804b2ee8558313222a898513a9543}\label{c4-pedestrian-detector_8cpp_a205804b2ee8558313222a898513a9543}} 
\index{c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}!Compute\+CT@{Compute\+CT}}
\index{Compute\+CT@{Compute\+CT}!c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}}
\subsubsection{\texorpdfstring{Compute\+C\+T()}{ComputeCT()}}
{\footnotesize\ttfamily void Compute\+CT (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_int_image}{Int\+Image}}$<$ double $>$ \&}]{original,  }\item[{\mbox{\hyperlink{class_int_image}{Int\+Image}}$<$ int $>$ \&}]{ct }\end{DoxyParamCaption})}



Definition at line 11 of file c4-\/pedestrian-\/detector.\+cpp.


\begin{DoxyCode}
12 \{
13     ct.\mbox{\hyperlink{class_array2d_c_abfe87be7641dfc586b9e7bffebcca9ec}{Create}}(original.\mbox{\hyperlink{class_array2d_c_a12f690f7195f7674a86a7e1eedbc473c}{nrow}},original.\mbox{\hyperlink{class_array2d_c_a27e0f8f40f644831cd7c750db59dc28a}{ncol}});
14     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=2; i<original.\mbox{\hyperlink{class_array2d_c_a12f690f7195f7674a86a7e1eedbc473c}{nrow}}-2; i++)
15     \{
16         \textcolor{keywordtype}{double}* p1 = original.\mbox{\hyperlink{class_array2d_c_a727eae5d663d463635cc150e6f771f0d}{p}}[i-1];
17         \textcolor{keywordtype}{double}* p2 = original.\mbox{\hyperlink{class_array2d_c_a727eae5d663d463635cc150e6f771f0d}{p}}[i];
18         \textcolor{keywordtype}{double}* p3 = original.\mbox{\hyperlink{class_array2d_c_a727eae5d663d463635cc150e6f771f0d}{p}}[i+1];
19         \textcolor{keywordtype}{int}* ctp = ct.\mbox{\hyperlink{class_array2d_c_a727eae5d663d463635cc150e6f771f0d}{p}}[i];
20         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=2; j<original.\mbox{\hyperlink{class_array2d_c_a27e0f8f40f644831cd7c750db59dc28a}{ncol}}-2; j++)
21         \{
22             \textcolor{keywordtype}{int} index = 0;
23             \textcolor{keywordflow}{if}(p2[j]<=p1[j-1]) index += 0x80;
24             \textcolor{keywordflow}{if}(p2[j]<=p1[j]) index += 0x40;
25             \textcolor{keywordflow}{if}(p2[j]<=p1[j+1]) index += 0x20;
26             \textcolor{keywordflow}{if}(p2[j]<=p2[j-1]) index += 0x10;
27             \textcolor{keywordflow}{if}(p2[j]<=p2[j+1]) index += 0x08;
28             \textcolor{keywordflow}{if}(p2[j]<=p3[j-1]) index += 0x04;
29             \textcolor{keywordflow}{if}(p2[j]<=p3[j]) index += 0x02;
30             \textcolor{keywordflow}{if}(p2[j]<=p3[j+1]) index ++;
31             ctp[j] = index;
32         \}
33     \}
34 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{c4-pedestrian-detector_8cpp_a205804b2ee8558313222a898513a9543_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp_a205804b2ee8558313222a898513a9543_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{c4-pedestrian-detector_8cpp_a1c2c730891bb9a5800d3761e8cfaa160}\label{c4-pedestrian-detector_8cpp_a1c2c730891bb9a5800d3761e8cfaa160}} 
\index{c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}!Load\+Cascade@{Load\+Cascade}}
\index{Load\+Cascade@{Load\+Cascade}!c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}}
\subsubsection{\texorpdfstring{Load\+Cascade()}{LoadCascade()}}
{\footnotesize\ttfamily void Load\+Cascade (\begin{DoxyParamCaption}\item[{std\+::string}]{cascade1,  }\item[{std\+::string}]{cascade2,  }\item[{\mbox{\hyperlink{class_detection_scanner}{Detection\+Scanner}} \&}]{ds }\end{DoxyParamCaption})}



Definition at line 109 of file c4-\/pedestrian-\/detector.\+cpp.


\begin{DoxyCode}
110 \{
111     std::vector<NodeDetector::NodeType> types;
112     std::vector<int> upper\_bounds;
113     std::vector<std::string> filenames;
114 
115     types.push\_back(\mbox{\hyperlink{class_node_detector_a7188c48dfe6b88b3b7f47c599c4832bda0fae40660f7fc68812bec11a7de3413e}{NodeDetector::CD\_LIN}}); \textcolor{comment}{// first node}
116     upper\_bounds.push\_back(100);
117     filenames.push\_back(cascade1);
118     types.push\_back(\mbox{\hyperlink{class_node_detector_a7188c48dfe6b88b3b7f47c599c4832bda65deee8e79173b207da52debff561c83}{NodeDetector::CD\_HIK}}); \textcolor{comment}{// second node}
119     upper\_bounds.push\_back(353);
120     filenames.push\_back(cascade2);
121 
122     ds.\mbox{\hyperlink{class_detection_scanner_a36c4db431f28648b82bd6e55afb67008}{LoadDetector}}(types,upper\_bounds,filenames);
123     \textcolor{comment}{// You can adjust these parameters for different speed, accuracy etc}
124     ds.\mbox{\hyperlink{class_detection_scanner_a5fd4ac1b6a6c56a95543eca549c26634}{cascade}}->\mbox{\hyperlink{class_cascade_detector_a7977422f255cf4d753665c0c6a0b0f07}{nodes}}[0]->\mbox{\hyperlink{class_node_detector_a2fd8792e80f3f31d2d07831a5169935f}{thresh}} += 0.8;
125     ds.\mbox{\hyperlink{class_detection_scanner_a5fd4ac1b6a6c56a95543eca549c26634}{cascade}}->\mbox{\hyperlink{class_cascade_detector_a7977422f255cf4d753665c0c6a0b0f07}{nodes}}[1]->\mbox{\hyperlink{class_node_detector_a2fd8792e80f3f31d2d07831a5169935f}{thresh}} -= 0.095;
126 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp_a1c2c730891bb9a5800d3761e8cfaa160_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=292pt]{c4-pedestrian-detector_8cpp_a1c2c730891bb9a5800d3761e8cfaa160_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{c4-pedestrian-detector_8cpp_a1a25c5eeb6b4917c272b201ff023ba68}\label{c4-pedestrian-detector_8cpp_a1a25c5eeb6b4917c272b201ff023ba68}} 
\index{c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}!Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure@{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}}
\index{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure@{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}!c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}}
\subsubsection{\texorpdfstring{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure()}{UseSVM\_CD\_FastEvaluationStructure()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily double Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure (\begin{DoxyParamCaption}\item[{const char $\ast$}]{modelfile,  }\item[{const int}]{m,  }\item[{\mbox{\hyperlink{class_array2d_c}{Array2dC}}$<$ double $>$ \&}]{result }\end{DoxyParamCaption})}



Definition at line 37 of file c4-\/pedestrian-\/detector.\+cpp.


\begin{DoxyCode}
38 \{
39     std::ifstream in(modelfile);
40     \textcolor{keywordflow}{if}(in.good()==\textcolor{keyword}{false})
41     \{
42         std::cout<<\textcolor{stringliteral}{"SVM model "}<<modelfile<<\textcolor{stringliteral}{" can not be loaded."}<<std::endl;
43         exit(-1);
44     \}
45     std::string buffer;
46     std::getline(in,buffer); \textcolor{comment}{// first line}
47     std::getline(in,buffer); \textcolor{comment}{// second line}
48     std::getline(in,buffer); \textcolor{comment}{// third line}
49     in>>buffer;
50     assert(buffer==\textcolor{stringliteral}{"nr\_feature"});
51     \textcolor{keywordtype}{int} num\_dim = m;
52     in>>num\_dim;
53     assert(num\_dim>0 && num\_dim==m);
54     std::getline(in,buffer); \textcolor{comment}{// end of line 4}
55     in>>buffer;
56     assert(buffer==\textcolor{stringliteral}{"bias"});
57     \textcolor{keywordtype}{int} bias;
58     in>>bias;
59     std::getline(in,buffer); \textcolor{comment}{//end of line 5;}
60     in>>buffer;
61     assert(buffer==\textcolor{stringliteral}{"w"});
62     std::getline(in,buffer); \textcolor{comment}{//end of line 6}
63     result.\mbox{\hyperlink{class_array2d_c_abfe87be7641dfc586b9e7bffebcca9ec}{Create}}(1,num\_dim);
64     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<num\_dim; i++) in>>result.\mbox{\hyperlink{class_array2d_c_a25d8fa5049d4c7ded126e0acdd18f37a}{buf}}[i];
65     \textcolor{keywordtype}{double} rho = 0;
66     \textcolor{keywordflow}{if}(bias>=0) in>>rho;
67     in.close();
68     \textcolor{keywordflow}{return} rho;
69 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp_a1a25c5eeb6b4917c272b201ff023ba68_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp_a1a25c5eeb6b4917c272b201ff023ba68_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{c4-pedestrian-detector_8cpp_a891356b11fe09e40a8b2993bc8d00c01}\label{c4-pedestrian-detector_8cpp_a891356b11fe09e40a8b2993bc8d00c01}} 
\index{c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}!Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure@{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}}
\index{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure@{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure}!c4-\/pedestrian-\/detector.\+cpp@{c4-\/pedestrian-\/detector.\+cpp}}
\subsubsection{\texorpdfstring{Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure()}{UseSVM\_CD\_FastEvaluationStructure()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily double Use\+S\+V\+M\+\_\+\+C\+D\+\_\+\+Fast\+Evaluation\+Structure (\begin{DoxyParamCaption}\item[{const char $\ast$}]{modelfile,  }\item[{const int}]{m,  }\item[{const int}]{upper\+\_\+bound,  }\item[{\mbox{\hyperlink{class_array2d_c}{Array2dC}}$<$ double $>$ \&}]{result }\end{DoxyParamCaption})}



Definition at line 72 of file c4-\/pedestrian-\/detector.\+cpp.


\begin{DoxyCode}
73 \{
74 
75     std::ifstream fs(modelfile, std::fstream::binary);
76     \textcolor{keywordflow}{if}( !fs.is\_open() )
77     \{
78         std::cout << \textcolor{stringliteral}{"SVM model "} << modelfile << \textcolor{stringliteral}{" can not be loaded."} << std::endl;
79         exit(-1);
80     \}
81     \textcolor{comment}{// Header}
82     \textcolor{keywordtype}{int} rows, cols, type, channels;
83     fs.read((\textcolor{keywordtype}{char}*)&rows, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));         \textcolor{comment}{// rows}
84     fs.read((\textcolor{keywordtype}{char}*)&cols, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));         \textcolor{comment}{// cols}
85     fs.read((\textcolor{keywordtype}{char}*)&type, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));         \textcolor{comment}{// type}
86     fs.read((\textcolor{keywordtype}{char}*)&channels, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));     \textcolor{comment}{// channels}
87 
88     \textcolor{comment}{// Data}
89     cv::Mat mat(rows, cols, type);
90     fs.read((\textcolor{keywordtype}{char}*)mat.data, CV\_ELEM\_SIZE(type) * rows * cols);
91 
92     \textcolor{keywordtype}{int} num\_dim = m;
93 
94     result.\mbox{\hyperlink{class_array2d_c_abfe87be7641dfc586b9e7bffebcca9ec}{Create}}(num\_dim, upper\_bound);
95     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<num\_dim; i++)
96         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < upper\_bound; j++)
97         \{
98             result.\mbox{\hyperlink{class_array2d_c_a727eae5d663d463635cc150e6f771f0d}{p}}[i][j]= mat.at<\textcolor{keywordtype}{double}>(i, j);
99         \}
100 
101     \textcolor{keywordflow}{return} -0.00455891;
102 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{c4-pedestrian-detector_8cpp_a891356b11fe09e40a8b2993bc8d00c01_cgraph}
\end{center}
\end{figure}
