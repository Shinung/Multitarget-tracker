\hypertarget{class_custom_s_s_d_mobile_net_example}{}\section{Custom\+S\+S\+D\+Mobile\+Net\+Example Class Reference}
\label{class_custom_s_s_d_mobile_net_example}\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}


This class is for customized caffe library It is need to build caffe library.  




{\ttfamily \#include $<$Video\+Example.\+h$>$}



Inheritance diagram for Custom\+S\+S\+D\+Mobile\+Net\+Example\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_custom_s_s_d_mobile_net_example__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Custom\+S\+S\+D\+Mobile\+Net\+Example\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_custom_s_s_d_mobile_net_example__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a9e343f571db038199f28b6d1ed04eba5}{Custom\+S\+S\+D\+Mobile\+Net\+Example}} (const cv\+::\+Command\+Line\+Parser \&parser)
\begin{DoxyCompactList}\small\item\em It\textquotesingle{}s needed deploy/label-\/map prototxt file path and caffemodel file path. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_video_example_a87efc66a82c36ad3380623d30a12abf2}{Process}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_video_example_a87efc66a82c36ad3380623d30a12abf2}{Video\+Example\+::\+Process}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a5d5c5184860ac247bd2f562d6678e5e2}{Init\+Tracker}} (cv\+::\+U\+Mat frame)
\begin{DoxyCompactList}\small\item\em Tracker and Detector will be initilaized in this function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a34a324a8390365c4e2c18ac049986df5}{Draw\+Data}} (cv\+::\+Mat frame, int frames\+Counter, int curr\+Time)
\begin{DoxyCompactList}\small\item\em Draw\+Data. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a4c3fe9ac68b5ef4f51d91a6322c5da02}{Gray\+Processing}} () const
\begin{DoxyCompactList}\small\item\em image color change to gray scale or not \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_video_example_a5ea4a212997371399b01aed1d59a80b8}{Detection}} (cv\+::\+Mat frame, cv\+::\+U\+Mat gray\+Frame, \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&regions)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_video_example_a5ea4a212997371399b01aed1d59a80b8}{Video\+Example\+::\+Detection}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_video_example_af412482dcaad532d958dc31b362ee1c2}{Tracking}} (cv\+::\+Mat frame, cv\+::\+U\+Mat gray\+Frame, const \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&regions)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_video_example_af412482dcaad532d958dc31b362ee1c2}{Video\+Example\+::\+Tracking}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}{Draw\+Track}} (cv\+::\+Mat frame, int resize\+Coeff, const \mbox{\hyperlink{class_c_track}{C\+Track}} \&track, bool draw\+Trajectory=true, bool is\+Static=false)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}{Video\+Example\+::\+Draw\+Track}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_video_example_ace8617201da40b6e230bd6c049b48aa0}{Capture\+And\+Detect}} (\mbox{\hyperlink{class_video_example}{Video\+Example}} $\ast$this\+Ptr, bool $\ast$stop\+Capture, std\+::mutex $\ast$frame\+Lock, std\+::condition\+\_\+variable $\ast$frame\+Cond, std\+::mutex $\ast$track\+Lock, std\+::condition\+\_\+variable $\ast$track\+Cond)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_video_example_ace8617201da40b6e230bd6c049b48aa0}{Video\+Example\+::\+Capture\+And\+Detect}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_base_detector}{Base\+Detector}} $>$ \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\+\_\+detector}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_c_tracker}{C\+Tracker}} $>$ \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\+\_\+tracker}}
\item 
bool \mbox{\hyperlink{class_video_example_af3bfe51e3e1452bb084016602c668463}{m\+\_\+show\+Logs}}
\item 
float \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\+\_\+fps}}
\item 
bool \mbox{\hyperlink{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}{m\+\_\+use\+Local\+Tracking}}
\item 
int \mbox{\hyperlink{class_video_example_aea3c9dd66a3464fab8c61a838aff0ccf}{m\+\_\+capture\+Time\+Out}}
\item 
int \mbox{\hyperlink{class_video_example_a47c8dd1d6ec7e8e18a8f7d92536c53a2}{m\+\_\+tracking\+Time\+Out}}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
cv\+::\+String \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a5f0ab35a8bb7c9bbe48750551472d5bd}{m\+Deploy}}
\item 
cv\+::\+String \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a3828507c8d2af5d9ba6f5a7de7fa3b42}{m\+Weights}}
\item 
cv\+::\+String \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a15b05488bca85e442ba403ff02a24b5f}{m\+Label\+Map}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class is for customized caffe library It is need to build caffe library. 

I build and test with below caffe library \href{https://github.com/Shinung/caffe/tree/ssd_win_inference}{\tt https\+://github.\+com/\+Shinung/caffe/tree/ssd\+\_\+win\+\_\+inference}
\begin{DoxyItemize}
\item this branch is a caffe-\/ssd library ported to windows and for inference.
\item For Mobilenet\+S\+SD, I build caffe-\/ssd with \href{https://github.com/yonghenglh6/DepthwiseConvolution}{\tt Depthwise Convolutional Layer}
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Definition at line 571 of file Video\+Example.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a9e343f571db038199f28b6d1ed04eba5}\label{class_custom_s_s_d_mobile_net_example_a9e343f571db038199f28b6d1ed04eba5}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Custom\+S\+S\+D\+Mobile\+Net\+Example()}{CustomSSDMobileNetExample()}}
{\footnotesize\ttfamily Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Custom\+S\+S\+D\+Mobile\+Net\+Example (\begin{DoxyParamCaption}\item[{const cv\+::\+Command\+Line\+Parser \&}]{parser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



It\textquotesingle{}s needed deploy/label-\/map prototxt file path and caffemodel file path. 


\begin{DoxyParams}{Parameters}
{\em parser} & Construct with arguments in cv\+::\+Command\+Line\+Parser \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Definition at line 579 of file Video\+Example.\+h.


\begin{DoxyCode}
580         :
581         \mbox{\hyperlink{class_video_example_aedc40ab44835e8ad1cf731b7709cd4ac}{VideoExample}}(parser),
582         \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a5f0ab35a8bb7c9bbe48750551472d5bd}{mDeploy}}(parser.get<cv::String>(\textcolor{stringliteral}{"deploy"})),
583         \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a3828507c8d2af5d9ba6f5a7de7fa3b42}{mWeights}}(parser.get<cv::String>(\textcolor{stringliteral}{"weights"})),
584         \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a15b05488bca85e442ba403ff02a24b5f}{mLabelMap}}(parser.get<cv::String>(\textcolor{stringliteral}{"label-map"}))
585     \{
586     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_video_example_ace8617201da40b6e230bd6c049b48aa0}\label{class_video_example_ace8617201da40b6e230bd6c049b48aa0}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Capture\+And\+Detect@{Capture\+And\+Detect}}
\index{Capture\+And\+Detect@{Capture\+And\+Detect}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Capture\+And\+Detect()}{CaptureAndDetect()}}
{\footnotesize\ttfamily void Video\+Example\+::\+Capture\+And\+Detect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_video_example}{Video\+Example}} $\ast$}]{this\+Ptr,  }\item[{bool $\ast$}]{stop\+Capture,  }\item[{std\+::mutex $\ast$}]{frame\+Lock,  }\item[{std\+::condition\+\_\+variable $\ast$}]{frame\+Cond,  }\item[{std\+::mutex $\ast$}]{track\+Lock,  }\item[{std\+::condition\+\_\+variable $\ast$}]{track\+Cond }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}, {\ttfamily [inherited]}}



\mbox{\hyperlink{class_video_example_ace8617201da40b6e230bd6c049b48aa0}{Video\+Example\+::\+Capture\+And\+Detect}}. 


\begin{DoxyParams}{Parameters}
{\em this\+Ptr} & \\
\hline
{\em stop\+Capture} & \\
\hline
{\em frame\+Lock} & \\
\hline
{\em frame\+Cond} & \\
\hline
{\em track\+Lock} & \\
\hline
{\em track\+Cond} & \\
\hline
\end{DoxyParams}


Definition at line 181 of file Video\+Example.\+cpp.


\begin{DoxyCode}
187 \{
188     cv::VideoCapture capture(thisPtr->\mbox{\hyperlink{class_video_example_ac536e84dec6f9be505779689322b42ca}{m\_inFile}});
189 
190     \textcolor{keywordflow}{if} (!capture.isOpened())
191     \{
192         std::cerr << \textcolor{stringliteral}{"Can't open "} << thisPtr->\mbox{\hyperlink{class_video_example_ac536e84dec6f9be505779689322b42ca}{m\_inFile}} << std::endl;
193         \textcolor{keywordflow}{return};
194     \}
195 
196     capture.set(cv::CAP\_PROP\_POS\_FRAMES, thisPtr->\mbox{\hyperlink{class_video_example_a98dbe94b8827c5a1898e3a9423cce402}{m\_startFrame}});
197 
198     thisPtr->\mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}} = std::max(1.\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}, (\textcolor{keywordtype}{float})capture.get(cv::CAP\_PROP\_FPS));
199 
200     frameCond->notify\_all();
201 
202     \textcolor{keywordtype}{int} currFrame = 0;
203     \textcolor{keywordflow}{for} (; !(*stopCapture);)
204     \{
205         \{
206             std::unique\_lock<std::mutex> lock(*trackLock);
207             \textcolor{keyword}{auto} now = std::chrono::system\_clock::now();
208             \textcolor{keywordflow}{if} (trackCond->wait\_until(lock, now + std::chrono::milliseconds(thisPtr->
      \mbox{\hyperlink{class_video_example_a47c8dd1d6ec7e8e18a8f7d92536c53a2}{m\_trackingTimeOut}})) == std::cv\_status::timeout)
209             \{
210                 std::cerr << \textcolor{stringliteral}{"CaptureAndDetect: Tracking timeout!"} << std::endl;
211                 \textcolor{keywordflow}{break};
212             \}
213         \}
214         frameLock->lock();
215         currFrame = thisPtr->\mbox{\hyperlink{class_video_example_a4adccbe4084f68f10d966901b168a98a}{m\_currFrame}} ? 0 : 1;
216         frameLock->unlock();
217 
218         capture >> thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ace63373cca952f2c7f281b18220f9f8c}{m\_frame}};
219         \textcolor{keywordflow}{if} (thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ace63373cca952f2c7f281b18220f9f8c}{m\_frame}}.empty())
220         \{
221             std::cerr << \textcolor{stringliteral}{"CaptureAndDetect: frame is empty!"} << std::endl;
222             \textcolor{keywordflow}{break};
223         \}
224         cv::cvtColor(thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ace63373cca952f2c7f281b18220f9f8c}{m\_frame}}, thisPtr->
      \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ad7354c359e618ccc2febcfd50e6edb15}{m\_gray}}, cv::COLOR\_BGR2GRAY);
225 
226         \textcolor{keywordflow}{if} (!thisPtr->\mbox{\hyperlink{class_video_example_ac39c29e82360b1100d09b72b61c7c461}{m\_isTrackerInitialized}})
227         \{
228             thisPtr->\mbox{\hyperlink{class_video_example_ac39c29e82360b1100d09b72b61c7c461}{m\_isTrackerInitialized}} = thisPtr->
      \mbox{\hyperlink{class_video_example_a93e23d64075fb2f508423e45d15c5421}{InitTracker}}(thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ad7354c359e618ccc2febcfd50e6edb15}{m\_gray}});
229             \textcolor{keywordflow}{if} (!thisPtr->\mbox{\hyperlink{class_video_example_ac39c29e82360b1100d09b72b61c7c461}{m\_isTrackerInitialized}})
230             \{
231                 std::cerr << \textcolor{stringliteral}{"CaptureAndDetect: Tracker initilize error!!!"} << std::endl;
232                 \textcolor{keywordflow}{break};
233             \}
234         \}
235 
236         int64 \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = cv::getTickCount();
237         thisPtr->\mbox{\hyperlink{class_video_example_a5ea4a212997371399b01aed1d59a80b8}{Detection}}(thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].
      \mbox{\hyperlink{struct_video_example_1_1_frame_info_ace63373cca952f2c7f281b18220f9f8c}{m\_frame}}, thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ad7354c359e618ccc2febcfd50e6edb15}{m\_gray}}, thisPtr->
      \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_aa4f6d562d893f578ad71144b2145fd50}{m\_regions}});
238         int64 t2 = cv::getTickCount();
239         thisPtr->\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_a1f0a32e6ab3a40b1173f73767523372f}{m\_dt}} = t2 - \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}};
240 
241         frameLock->lock();
242         thisPtr->\mbox{\hyperlink{class_video_example_a4adccbe4084f68f10d966901b168a98a}{m\_currFrame}} = thisPtr->\mbox{\hyperlink{class_video_example_a4adccbe4084f68f10d966901b168a98a}{m\_currFrame}} ? 0 : 1;
243         frameLock->unlock();
244         frameCond->notify\_all();
245     \}
246 
247     *stopCapture = \textcolor{keyword}{true};
248     frameCond->notify\_all();
249 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_ace8617201da40b6e230bd6c049b48aa0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_ace8617201da40b6e230bd6c049b48aa0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_video_example_a5ea4a212997371399b01aed1d59a80b8}\label{class_video_example_a5ea4a212997371399b01aed1d59a80b8}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Detection@{Detection}}
\index{Detection@{Detection}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Detection()}{Detection()}}
{\footnotesize\ttfamily void Video\+Example\+::\+Detection (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{frame,  }\item[{cv\+::\+U\+Mat}]{gray\+Frame,  }\item[{\mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&}]{regions }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



\mbox{\hyperlink{class_video_example_a5ea4a212997371399b01aed1d59a80b8}{Video\+Example\+::\+Detection}}. 


\begin{DoxyParams}{Parameters}
{\em frame} & \\
\hline
{\em gray\+Frame} & \\
\hline
{\em regions} & \\
\hline
\end{DoxyParams}


Definition at line 266 of file Video\+Example.\+cpp.


\begin{DoxyCode}
267 \{
268     cv::UMat clFrame;
269     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_video_example_af8ea44f17711129d2b954d1f01fee1f0}{GrayProcessing}}() || !\mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->GrayFrameToTrack())
270     \{
271         clFrame = frame.getUMat(cv::ACCESS\_READ);
272     \}
273 
274     \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}}->Detect(\mbox{\hyperlink{class_video_example_af8ea44f17711129d2b954d1f01fee1f0}{GrayProcessing}}() ? grayFrame : clFrame);
275 
276     \textcolor{keyword}{const} \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\_t}}& regs = \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}}->GetDetects();
277 
278     regions.assign(std::begin(regs), std::end(regs));
279 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_a5ea4a212997371399b01aed1d59a80b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_a5ea4a212997371399b01aed1d59a80b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a34a324a8390365c4e2c18ac049986df5}\label{class_custom_s_s_d_mobile_net_example_a34a324a8390365c4e2c18ac049986df5}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Draw\+Data@{Draw\+Data}}
\index{Draw\+Data@{Draw\+Data}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Draw\+Data()}{DrawData()}}
{\footnotesize\ttfamily void Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Draw\+Data (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{frame,  }\item[{int}]{frames\+Counter,  }\item[{int}]{curr\+Time }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Draw\+Data. 


\begin{DoxyParams}{Parameters}
{\em frame} & \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{class_video_example_a53eb15977cb147dac218d8ea337986cd}{Video\+Example}}.



Definition at line 636 of file Video\+Example.\+h.


\begin{DoxyCode}
637     \{
638         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_video_example_af3bfe51e3e1452bb084016602c668463}{m\_showLogs}})
639         \{
640             std::cout << \textcolor{stringliteral}{"Frame "} << framesCounter << \textcolor{stringliteral}{": tracks = "} << \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->tracks.size() <<
       \textcolor{stringliteral}{", time = "} << currTime << std::endl;
641         \}
642 
643         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& track : \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->tracks)
644         \{
645             \textcolor{keywordflow}{if} (track->IsRobust(5,                           \textcolor{comment}{// Minimal trajectory size}
646                 0.2f,                        \textcolor{comment}{// Minimal ratio raw\_trajectory\_points / trajectory\_lenght}
647                 cv::Size2f(0.1f, 8.0f))      \textcolor{comment}{// Min and max ratio: width / height}
648                 )
649             \{
650                 \mbox{\hyperlink{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}{DrawTrack}}(frame, 1, *track);
651 
652                 std::ostringstream label;
653                 label << track->m\_lastRegion.m\_type << \textcolor{stringliteral}{": "} << std::setprecision(1) << track->m\_lastRegion.
      m\_confidence;
654                 \textcolor{keywordtype}{int} baseLine = 0;
655                 cv::Size labelSize = cv::getTextSize(label.str(), cv::FONT\_HERSHEY\_SIMPLEX, 0.5, 1, &
      baseLine);
656                 \textcolor{keyword}{auto} rect(track->GetLastRect());
657                 cv::rectangle(frame, cv::Rect(cv::Point(rect.x, rect.y - labelSize.height), cv::Size(
      labelSize.width, labelSize.height + baseLine)), cv::Scalar(255, 255, 255), CV\_FILLED);
658                 cv::putText(frame, label.str(), cv::Point(rect.x, rect.y), cv::FONT\_HERSHEY\_SIMPLEX, 0.5, 
      cv::Scalar(0, 0, 0));
659             \}
660         \}
661 
662         \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}}->CalcMotionMap(frame);
663     \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_custom_s_s_d_mobile_net_example_a34a324a8390365c4e2c18ac049986df5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}\label{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Draw\+Track@{Draw\+Track}}
\index{Draw\+Track@{Draw\+Track}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Draw\+Track()}{DrawTrack()}}
{\footnotesize\ttfamily void Video\+Example\+::\+Draw\+Track (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{frame,  }\item[{int}]{resize\+Coeff,  }\item[{const \mbox{\hyperlink{class_c_track}{C\+Track}} \&}]{track,  }\item[{bool}]{draw\+Trajectory = {\ttfamily true},  }\item[{bool}]{is\+Static = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



\mbox{\hyperlink{class_video_example_a84a040bc87b915c5ee18c5d11235f40c}{Video\+Example\+::\+Draw\+Track}}. 


\begin{DoxyParams}{Parameters}
{\em frame} & \\
\hline
{\em resize\+Coeff} & \\
\hline
{\em track} & \\
\hline
{\em draw\+Trajectory} & \\
\hline
{\em is\+Static} & \\
\hline
\end{DoxyParams}


Definition at line 306 of file Video\+Example.\+cpp.


\begin{DoxyCode}
312 \{
313     \textcolor{keyword}{auto} ResizeRect = [&](\textcolor{keyword}{const} cv::Rect& r) -> cv::Rect
314     \{
315         \textcolor{keywordflow}{return} cv::Rect(resizeCoeff * r.x, resizeCoeff * r.y, resizeCoeff * r.width, resizeCoeff * r.height
      );
316     \};
317     \textcolor{keyword}{auto} ResizePoint = [&](\textcolor{keyword}{const} cv::Point& \mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}}) -> cv::Point
318     \{
319         \textcolor{keywordflow}{return} cv::Point(resizeCoeff * \mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}}.x, resizeCoeff * \mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}}.y);
320     \};
321 
322     \textcolor{keywordflow}{if} (isStatic)
323     \{
324         cv::rectangle(frame, ResizeRect(track.\mbox{\hyperlink{class_c_track_abe6c22779a5d7f0403980f4b4c647ade}{GetLastRect}}()), cv::Scalar(255, 0, 255), 2, CV\_AA)
      ;
325     \}
326     \textcolor{keywordflow}{else}
327     \{
328         cv::rectangle(frame, ResizeRect(track.\mbox{\hyperlink{class_c_track_abe6c22779a5d7f0403980f4b4c647ade}{GetLastRect}}()), cv::Scalar(0, 255, 0), 1, CV\_AA);
329     \}
330 
331     \textcolor{keywordflow}{if} (drawTrajectory)
332     \{
333         cv::Scalar cl = \mbox{\hyperlink{class_video_example_a2b6d4a6e85d52d13d8899c57cc6ddc66}{m\_colors}}[track.\mbox{\hyperlink{class_c_track_a8aae01d68f5a1a6c0292476ea19c89f9}{m\_trackID}} % \mbox{\hyperlink{class_video_example_a2b6d4a6e85d52d13d8899c57cc6ddc66}{m\_colors}}.size()];
334 
335         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < track.\mbox{\hyperlink{class_c_track_adf88ff8678ec928ac3ca764f7308b96f}{m\_trace}}.\mbox{\hyperlink{class_trace_a1bc7111ffb39ba415c2553677fc2f3ba}{size}}() - 1; ++j)
336         \{
337             \textcolor{keyword}{const} \mbox{\hyperlink{struct_trajectory_point}{TrajectoryPoint}}& pt1 = track.\mbox{\hyperlink{class_c_track_adf88ff8678ec928ac3ca764f7308b96f}{m\_trace}}.\mbox{\hyperlink{class_trace_a275e31cde73ea1ba7f51c17191aefcd5}{at}}(j);
338             \textcolor{keyword}{const} \mbox{\hyperlink{struct_trajectory_point}{TrajectoryPoint}}& pt2 = track.\mbox{\hyperlink{class_c_track_adf88ff8678ec928ac3ca764f7308b96f}{m\_trace}}.\mbox{\hyperlink{class_trace_a275e31cde73ea1ba7f51c17191aefcd5}{at}}(j + 1);
339 
340             cv::line(frame, ResizePoint(pt1.\mbox{\hyperlink{struct_trajectory_point_a967909b451c226e4927a2b96fcecbb6e}{m\_prediction}}), ResizePoint(pt2.
      \mbox{\hyperlink{struct_trajectory_point_a967909b451c226e4927a2b96fcecbb6e}{m\_prediction}}), cl, 1, CV\_AA);
341             \textcolor{keywordflow}{if} (!pt2.\mbox{\hyperlink{struct_trajectory_point_aedf0113745aff30b359a60401ddcf076}{m\_hasRaw}})
342             \{
343                 cv::circle(frame, ResizePoint(pt2.\mbox{\hyperlink{struct_trajectory_point_a967909b451c226e4927a2b96fcecbb6e}{m\_prediction}}), 4, cl, 1, CV\_AA);
344             \}
345         \}
346     \}
347 
348     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}{m\_useLocalTracking}})
349     \{
350         cv::Scalar cl = \mbox{\hyperlink{class_video_example_a2b6d4a6e85d52d13d8899c57cc6ddc66}{m\_colors}}[track.\mbox{\hyperlink{class_c_track_a8aae01d68f5a1a6c0292476ea19c89f9}{m\_trackID}} % \mbox{\hyperlink{class_video_example_a2b6d4a6e85d52d13d8899c57cc6ddc66}{m\_colors}}.size()];
351 
352         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}} : track.\mbox{\hyperlink{class_c_track_a5af91fbfad7ebf07bd0f681f915e440c}{m\_lastRegion}}.\mbox{\hyperlink{class_c_region_a65be08ae81a8d174d95ae35a2f7fb212}{m\_points}})
353         \{
354             cv::circle(frame, cv::Point(cvRound(\mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}}.x), cvRound(\mbox{\hyperlink{rings_8cpp_af69bbacaaf68a115b351c5d1e29c3cc8}{pt}}.y)), 1, cl, -1, CV\_AA);
355         \}
356     \}
357 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_a84a040bc87b915c5ee18c5d11235f40c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_a84a040bc87b915c5ee18c5d11235f40c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a4c3fe9ac68b5ef4f51d91a6322c5da02}\label{class_custom_s_s_d_mobile_net_example_a4c3fe9ac68b5ef4f51d91a6322c5da02}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Gray\+Processing@{Gray\+Processing}}
\index{Gray\+Processing@{Gray\+Processing}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Gray\+Processing()}{GrayProcessing()}}
{\footnotesize\ttfamily bool Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Gray\+Processing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



image color change to gray scale or not 

I followed \mbox{\hyperlink{class_s_s_d_mobile_net_example}{S\+S\+D\+Mobile\+Net\+Example}} code. \begin{DoxyReturn}{Returns}
always T\+R\+UE 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Reimplemented from \mbox{\hyperlink{class_video_example_af8ea44f17711129d2b954d1f01fee1f0}{Video\+Example}}.



Definition at line 672 of file Video\+Example.\+h.


\begin{DoxyCode}
673     \{
674         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
675     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a5d5c5184860ac247bd2f562d6678e5e2}\label{class_custom_s_s_d_mobile_net_example_a5d5c5184860ac247bd2f562d6678e5e2}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Init\+Tracker@{Init\+Tracker}}
\index{Init\+Tracker@{Init\+Tracker}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Init\+Tracker()}{InitTracker()}}
{\footnotesize\ttfamily bool Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Init\+Tracker (\begin{DoxyParamCaption}\item[{cv\+::\+U\+Mat}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Tracker and Detector will be initilaized in this function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & gray image \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_video_example_ace8617201da40b6e230bd6c049b48aa0}{Video\+Example\+::\+Capture\+And\+Detect}} 

\mbox{\hyperlink{namespacetracking_a1edf574df68abf048988b7cbacc52760}{tracking\+::\+Detectors}} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
true if tracker and detector is initilaized successfully 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Implements \mbox{\hyperlink{class_video_example_a93e23d64075fb2f508423e45d15c5421}{Video\+Example}}.



Definition at line 597 of file Video\+Example.\+h.


\begin{DoxyCode}
598     \{
599         \mbox{\hyperlink{defines_8h_a81d657237a541d02f8eeefdd40191920}{config\_t}} config;
600         config[\textcolor{stringliteral}{"modelConfiguration"}] = \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a5f0ab35a8bb7c9bbe48750551472d5bd}{mDeploy}}.c\_str();
601         config[\textcolor{stringliteral}{"modelBinary"}] = \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a3828507c8d2af5d9ba6f5a7de7fa3b42}{mWeights}}.c\_str();
602         config[\textcolor{stringliteral}{"labelMap"}] = \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a15b05488bca85e442ba403ff02a24b5f}{mLabelMap}}.c\_str();
603         config[\textcolor{stringliteral}{"meanValue"}] = \textcolor{stringliteral}{"104,117,123"};
604         config[\textcolor{stringliteral}{"confidenceThreshold"}] = \textcolor{stringliteral}{"0.5"};
605         config[\textcolor{stringliteral}{"maxCropRatio"}] = \textcolor{stringliteral}{"3.0"};
606         config[\textcolor{stringliteral}{"dnnTarget"}] = \textcolor{stringliteral}{"DNN\_TARGET\_OPENCL\_FP16"};
607         \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}} = std::unique\_ptr<BaseDetector>(\mbox{\hyperlink{_base_detector_8cpp_a7648f35ed8e9d0160414d8e0eaf99c15}{CreateDetector}}(
      \mbox{\hyperlink{namespacetracking_a1edf574df68abf048988b7cbacc52760aad91e73b0e787896ba30df4540e992e7}{tracking::Detectors::SSD\_CustomNet}}, config, 
      \mbox{\hyperlink{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}{m\_useLocalTracking}}, frame));
608         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}}.get())
609         \{
610             \textcolor{keywordflow}{return} \textcolor{keyword}{false};
611         \}
612         \mbox{\hyperlink{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}{m\_detector}}->SetMinObjectSize(cv::Size(frame.cols / 20, frame.rows / 20));
613 
614         \mbox{\hyperlink{struct_tracker_settings}{TrackerSettings}} settings;
615         settings.\mbox{\hyperlink{struct_tracker_settings_a64f4e2f0b2eaeae47316690ab5a5e620}{m\_useLocalTracking}} = \mbox{\hyperlink{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}{m\_useLocalTracking}};
616         settings.\mbox{\hyperlink{struct_tracker_settings_a2633bd68c2d482a666a5d4bba580cca0}{m\_distType}} = \mbox{\hyperlink{namespacetracking_a55743c5e18b9b228c4ba2587260b2502a43af27628a9ee8e94a23c079eab5d448}{tracking::DistRects}};
617         settings.\mbox{\hyperlink{struct_tracker_settings_a3856a809067135c1c3f2d3c61fc4d6b7}{m\_kalmanType}} = \mbox{\hyperlink{namespacetracking_a83f2c4d58ea2737f7d6296dce3eb722aa889eca583e371386c92e05814797a885}{tracking::KalmanLinear}};
618         settings.\mbox{\hyperlink{struct_tracker_settings_afd6c83aa8b0eaa4f131f45852a0b89e4}{m\_filterGoal}} = \mbox{\hyperlink{namespacetracking_a9b3e7d16c86cd8b781ab214e396b0ebfabb259eae9513c55b313c553ce6249aea}{tracking::FilterRect}};
619         settings.\mbox{\hyperlink{struct_tracker_settings_a61a59f1c5bcc2ee76cef1b174d4bb8a4}{m\_lostTrackType}} = \mbox{\hyperlink{namespacetracking_a5377d69122ad915004ef68a518d22be3a9bba8e4377e562caa976576d47c5eb2e}{tracking::TrackKCF}};       \textcolor{comment}{// Use KCF
       tracker for collisions resolving}
620         settings.\mbox{\hyperlink{struct_tracker_settings_a94a05cbda5eeeac7fa1b64baf9c703f5}{m\_matchType}} = \mbox{\hyperlink{namespacetracking_a491e50c9261ab820965d871a217d4f13a8c97315e46df8c0716a9538655fc967d}{tracking::MatchHungrian}};
621         settings.\mbox{\hyperlink{struct_tracker_settings_ae876ad4f3599a782cddb37e318430aaa}{m\_dt}} = 0.3f;                                \textcolor{comment}{// Delta time for Kalman filter}
622         settings.\mbox{\hyperlink{struct_tracker_settings_a9d4bcf1b68d5a13de8f9fea89f3b694f}{m\_accelNoiseMag}} = 0.1f;                     \textcolor{comment}{// Accel noise magnitude for
       Kalman filter}
623         settings.\mbox{\hyperlink{struct_tracker_settings_a10e76ae03bd840f6c9180ce67faaa83c}{m\_distThres}} = frame.rows / 10;              \textcolor{comment}{// Distance threshold between
       region and object on two frames}
624         settings.\mbox{\hyperlink{struct_tracker_settings_a7825c3e88ee979fba2844c238fc51139}{m\_maximumAllowedSkippedFrames}} = 2 * 
      \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}};  \textcolor{comment}{// Maximum allowed skipped frames}
625         settings.\mbox{\hyperlink{struct_tracker_settings_abc7ce62dfe8de5ae33506aac41fddcac}{m\_maxTraceLength}} = 5 * \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}};               \textcolor{comment}{// Maximum trace length}
626 
627         \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}} = std::make\_unique<CTracker>(settings);
628 
629         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
630     \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_custom_s_s_d_mobile_net_example_a5d5c5184860ac247bd2f562d6678e5e2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_video_example_a87efc66a82c36ad3380623d30a12abf2}\label{class_video_example_a87efc66a82c36ad3380623d30a12abf2}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Process@{Process}}
\index{Process@{Process}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Process()}{Process()}}
{\footnotesize\ttfamily void Video\+Example\+::\+Process (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inherited]}}



\mbox{\hyperlink{class_video_example_a87efc66a82c36ad3380623d30a12abf2}{Video\+Example\+::\+Process}}. 



Definition at line 57 of file Video\+Example.\+cpp.


\begin{DoxyCode}
58 \{
59     \mbox{\hyperlink{class_video_example_a4adccbe4084f68f10d966901b168a98a}{m\_currFrame}} = 1;
60     \textcolor{keywordtype}{bool} stopCapture = \textcolor{keyword}{false};
61     std::mutex frameLock;
62     std::condition\_variable frameCond;
63 
64     std::mutex trackLock;
65     std::condition\_variable trackCond;
66     std::thread thCapDet(\mbox{\hyperlink{class_video_example_ace8617201da40b6e230bd6c049b48aa0}{CaptureAndDetect}}, \textcolor{keyword}{this}, &stopCapture, &frameLock, &frameCond, &
      trackLock, &trackCond);
67     thCapDet.detach();
68 
69     \{
70         std::unique\_lock<std::mutex> lock(frameLock);
71         \textcolor{keyword}{auto} now = std::chrono::system\_clock::now();
72         \textcolor{keywordflow}{if} (frameCond.wait\_until(lock, now + std::chrono::milliseconds(
      \mbox{\hyperlink{class_video_example_aea3c9dd66a3464fab8c61a838aff0ccf}{m\_captureTimeOut}})) == std::cv\_status::timeout)
73         \{
74             std::cerr << \textcolor{stringliteral}{"Process: Init capture timeout"} << std::endl;
75             stopCapture = \textcolor{keyword}{true};
76 
77             \textcolor{keywordflow}{if} (thCapDet.joinable())
78             \{
79                 thCapDet.join();
80             \}
81             \textcolor{keywordflow}{return};
82         \}
83     \}
84 
85     cv::VideoWriter writer;
86 
87     cv::namedWindow(\textcolor{stringliteral}{"Video"}, cv::WINDOW\_NORMAL | cv::WINDOW\_KEEPRATIO);
88 
89     \textcolor{keywordtype}{int} k = 0;
90 
91     \textcolor{keywordtype}{double} freq = cv::getTickFrequency();
92 
93     int64 allTime = 0;
94 
95     \textcolor{keywordtype}{bool} manualMode = \textcolor{keyword}{false};
96     \textcolor{keywordtype}{int} framesCounter = \mbox{\hyperlink{class_video_example_a98dbe94b8827c5a1898e3a9423cce402}{m\_startFrame}} + 1;
97 
98     std::this\_thread::sleep\_for(std::chrono::milliseconds(1000));
99     trackCond.notify\_all();
100 
101     \textcolor{keywordtype}{int} currFrame = 0;
102     \textcolor{keywordflow}{for} (; !stopCapture && k != 27; )
103     \{
104         \{
105             std::unique\_lock<std::mutex> lock(frameLock);
106             \textcolor{keyword}{auto} now = std::chrono::system\_clock::now();
107             \textcolor{keywordflow}{if} (frameCond.wait\_until(lock, now + std::chrono::milliseconds(
      \mbox{\hyperlink{class_video_example_aea3c9dd66a3464fab8c61a838aff0ccf}{m\_captureTimeOut}})) == std::cv\_status::timeout)
108             \{
109                 std::cerr << \textcolor{stringliteral}{"Process: Frame capture timeout"} << std::endl;
110                 \textcolor{keywordflow}{break};
111             \}
112         \}
113         \textcolor{keywordflow}{if} (stopCapture)
114         \{
115             \textcolor{keywordflow}{break};
116         \}
117 
118         frameLock.lock();
119         currFrame = \mbox{\hyperlink{class_video_example_a4adccbe4084f68f10d966901b168a98a}{m\_currFrame}};
120         frameLock.unlock();
121 
122         \textcolor{keywordflow}{if} (!writer.isOpened())
123         \{
124             writer.open(\mbox{\hyperlink{class_video_example_a4234fb0df2f009bc3f651f01cbd5bde5}{m\_outFile}}, cv::VideoWriter::fourcc(\textcolor{charliteral}{'H'}, \textcolor{charliteral}{'2'}, \textcolor{charliteral}{'6'}, \textcolor{charliteral}{'4'}), 
      \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}}, \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_frame.size(), \textcolor{keyword}{true});
125         \}
126 
127         int64 \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} = cv::getTickCount();
128 
129         \mbox{\hyperlink{class_video_example_af412482dcaad532d958dc31b362ee1c2}{Tracking}}(\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_frame, \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].
      m\_gray, \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_regions);
130 
131         int64 t2 = cv::getTickCount();
132 
133         allTime += t2 - \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_a1f0a32e6ab3a40b1173f73767523372f}{m\_dt}};
134         \textcolor{keywordtype}{int} currTime = cvRound(1000 * (t2 - \mbox{\hyperlink{gml2nestedsql_8cpp_a214bd1a0500f5739ce581a8bcffb518a}{t1}} + \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_dt) / freq);
135 
136         \mbox{\hyperlink{class_video_example_a53eb15977cb147dac218d8ea337986cd}{DrawData}}(\mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_frame, framesCounter, currTime);
137 
138         cv::imshow(\textcolor{stringliteral}{"Video"}, \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].m\_frame);
139 
140         \textcolor{keywordtype}{int} waitTime = manualMode ? 0 : std::max<int>(1, cvRound(1000 / \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}} - currTime));
141         k = cv::waitKey(waitTime);
142         \textcolor{keywordflow}{if} (k == \textcolor{charliteral}{'m'} || k == \textcolor{charliteral}{'M'})
143         \{
144             manualMode = !manualMode;
145         \}
146 
147         \textcolor{keywordflow}{if} (writer.isOpened())
148         \{
149             writer << \mbox{\hyperlink{class_video_example_af5363ad3ed9a34bd105dbdaf274acb66}{m\_frameInfo}}[currFrame].\mbox{\hyperlink{struct_video_example_1_1_frame_info_ace63373cca952f2c7f281b18220f9f8c}{m\_frame}};
150         \}
151 
152         trackCond.notify\_all();
153 
154         ++framesCounter;
155         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_video_example_ae44e854b8a76b3d4f6393582afd70e67}{m\_endFrame}} && framesCounter > \mbox{\hyperlink{class_video_example_ae44e854b8a76b3d4f6393582afd70e67}{m\_endFrame}})
156         \{
157             std::cout << \textcolor{stringliteral}{"Process: riched last "} << \mbox{\hyperlink{class_video_example_ae44e854b8a76b3d4f6393582afd70e67}{m\_endFrame}} << \textcolor{stringliteral}{" frame"} << std::endl;
158             \textcolor{keywordflow}{break};
159         \}
160     \}
161     stopCapture = \textcolor{keyword}{true};
162 
163     \textcolor{keywordflow}{if} (thCapDet.joinable())
164     \{
165         thCapDet.join();
166     \}
167 
168     std::cout << \textcolor{stringliteral}{"work time = "} << (allTime / freq) << std::endl;
169     cv::waitKey(\mbox{\hyperlink{class_video_example_ac21a646c343edd4c11db034fa2c8c085}{m\_finishDelay}});
170 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_a87efc66a82c36ad3380623d30a12abf2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{class_video_example_a87efc66a82c36ad3380623d30a12abf2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_video_example_af412482dcaad532d958dc31b362ee1c2}\label{class_video_example_af412482dcaad532d958dc31b362ee1c2}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!Tracking@{Tracking}}
\index{Tracking@{Tracking}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{Tracking()}{Tracking()}}
{\footnotesize\ttfamily void Video\+Example\+::\+Tracking (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{frame,  }\item[{cv\+::\+U\+Mat}]{gray\+Frame,  }\item[{const \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&}]{regions }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



\mbox{\hyperlink{class_video_example_af412482dcaad532d958dc31b362ee1c2}{Video\+Example\+::\+Tracking}}. 


\begin{DoxyParams}{Parameters}
{\em frame} & \\
\hline
{\em gray\+Frame} & \\
\hline
{\em regions} & \\
\hline
\end{DoxyParams}


Definition at line 287 of file Video\+Example.\+cpp.


\begin{DoxyCode}
288 \{
289     cv::UMat clFrame;
290     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_video_example_af8ea44f17711129d2b954d1f01fee1f0}{GrayProcessing}}() || !\mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->GrayFrameToTrack())
291     \{
292         clFrame = frame.getUMat(cv::ACCESS\_READ);
293     \}
294 
295     \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->Update(regions, \mbox{\hyperlink{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}{m\_tracker}}->GrayFrameToTrack() ? grayFrame : clFrame, 
      \mbox{\hyperlink{class_video_example_ae8110012f8d57f39d6355377cf20fb27}{m\_fps}});
296 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_af412482dcaad532d958dc31b362ee1c2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_video_example_af412482dcaad532d958dc31b362ee1c2_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_video_example_aea3c9dd66a3464fab8c61a838aff0ccf}\label{class_video_example_aea3c9dd66a3464fab8c61a838aff0ccf}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+capture\+Time\+Out@{m\+\_\+capture\+Time\+Out}}
\index{m\+\_\+capture\+Time\+Out@{m\+\_\+capture\+Time\+Out}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+capture\+Time\+Out}{m\_captureTimeOut}}
{\footnotesize\ttfamily int Video\+Example\+::m\+\_\+capture\+Time\+Out\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 46 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}\label{class_video_example_a00fee4b18b68d605b87051f3bdaa1c92}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+detector@{m\+\_\+detector}}
\index{m\+\_\+detector@{m\+\_\+detector}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+detector}{m\_detector}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_base_detector}{Base\+Detector}}$>$ Video\+Example\+::m\+\_\+detector\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 39 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_ae8110012f8d57f39d6355377cf20fb27}\label{class_video_example_ae8110012f8d57f39d6355377cf20fb27}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+fps@{m\+\_\+fps}}
\index{m\+\_\+fps@{m\+\_\+fps}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+fps}{m\_fps}}
{\footnotesize\ttfamily float Video\+Example\+::m\+\_\+fps\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 43 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_af3bfe51e3e1452bb084016602c668463}\label{class_video_example_af3bfe51e3e1452bb084016602c668463}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+show\+Logs@{m\+\_\+show\+Logs}}
\index{m\+\_\+show\+Logs@{m\+\_\+show\+Logs}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+show\+Logs}{m\_showLogs}}
{\footnotesize\ttfamily bool Video\+Example\+::m\+\_\+show\+Logs\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 42 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}\label{class_video_example_a7c58cd8c883981b2e645d1a3d8edf76a}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+tracker@{m\+\_\+tracker}}
\index{m\+\_\+tracker@{m\+\_\+tracker}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+tracker}{m\_tracker}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_c_tracker}{C\+Tracker}}$>$ Video\+Example\+::m\+\_\+tracker\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 40 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_a47c8dd1d6ec7e8e18a8f7d92536c53a2}\label{class_video_example_a47c8dd1d6ec7e8e18a8f7d92536c53a2}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+tracking\+Time\+Out@{m\+\_\+tracking\+Time\+Out}}
\index{m\+\_\+tracking\+Time\+Out@{m\+\_\+tracking\+Time\+Out}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+tracking\+Time\+Out}{m\_trackingTimeOut}}
{\footnotesize\ttfamily int Video\+Example\+::m\+\_\+tracking\+Time\+Out\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 47 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}\label{class_video_example_a951ee017c4fbb180dfc965a9a35ac69f}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+\_\+use\+Local\+Tracking@{m\+\_\+use\+Local\+Tracking}}
\index{m\+\_\+use\+Local\+Tracking@{m\+\_\+use\+Local\+Tracking}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+\_\+use\+Local\+Tracking}{m\_useLocalTracking}}
{\footnotesize\ttfamily bool Video\+Example\+::m\+\_\+use\+Local\+Tracking\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 44 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a5f0ab35a8bb7c9bbe48750551472d5bd}\label{class_custom_s_s_d_mobile_net_example_a5f0ab35a8bb7c9bbe48750551472d5bd}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+Deploy@{m\+Deploy}}
\index{m\+Deploy@{m\+Deploy}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+Deploy}{mDeploy}}
{\footnotesize\ttfamily cv\+::\+String Custom\+S\+S\+D\+Mobile\+Net\+Example\+::m\+Deploy\hspace{0.3cm}{\ttfamily [private]}}

deploy prototxt file path 

Definition at line 678 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a15b05488bca85e442ba403ff02a24b5f}\label{class_custom_s_s_d_mobile_net_example_a15b05488bca85e442ba403ff02a24b5f}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+Label\+Map@{m\+Label\+Map}}
\index{m\+Label\+Map@{m\+Label\+Map}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+Label\+Map}{mLabelMap}}
{\footnotesize\ttfamily cv\+::\+String Custom\+S\+S\+D\+Mobile\+Net\+Example\+::m\+Label\+Map\hspace{0.3cm}{\ttfamily [private]}}

label-\/map prototxt file path 

Definition at line 680 of file Video\+Example.\+h.

\mbox{\Hypertarget{class_custom_s_s_d_mobile_net_example_a3828507c8d2af5d9ba6f5a7de7fa3b42}\label{class_custom_s_s_d_mobile_net_example_a3828507c8d2af5d9ba6f5a7de7fa3b42}} 
\index{Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}!m\+Weights@{m\+Weights}}
\index{m\+Weights@{m\+Weights}!Custom\+S\+S\+D\+Mobile\+Net\+Example@{Custom\+S\+S\+D\+Mobile\+Net\+Example}}
\subsubsection{\texorpdfstring{m\+Weights}{mWeights}}
{\footnotesize\ttfamily cv\+::\+String Custom\+S\+S\+D\+Mobile\+Net\+Example\+::m\+Weights\hspace{0.3cm}{\ttfamily [private]}}

trained caffemodel file path 

Definition at line 679 of file Video\+Example.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\mbox{\hyperlink{_video_example_8h}{Video\+Example.\+h}}\end{DoxyCompactItemize}
