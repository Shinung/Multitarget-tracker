\hypertarget{class_g_p_u_allocator}{}\section{G\+P\+U\+Allocator Class Reference}
\label{class_g_p_u_allocator}\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}


{\ttfamily \#include $<$gpu\+\_\+allocator.\+h$>$}



Inheritance diagram for G\+P\+U\+Allocator\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=177pt]{class_g_p_u_allocator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for G\+P\+U\+Allocator\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=177pt]{class_g_p_u_allocator__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_g_p_u_allocator_aa98cb14ed329cc0dfd99982da0d9b671}{G\+P\+U\+Allocator}} (size\+\_\+t size)
\item 
\mbox{\hyperlink{class_g_p_u_allocator_aacf971bf00e58690d44a52b9649d6e8d}{$\sim$\+G\+P\+U\+Allocator}} ()
\item 
void \mbox{\hyperlink{class_g_p_u_allocator_a4734a73038db3517f88a64e6b5f556ef}{reset}} ()
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Gpu\+Mat\+:\+:Allocator interface}\par
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_g_p_u_allocator_abe0cecfd551e4824ed5522721dea76ca}{allocate}} (\mbox{\hyperlink{gpu__allocator_8h_aa7700da124206551c0f9d273152f13fb}{Gpu\+Mat}} $\ast$mat, int rows, int cols, size\+\_\+t elem\+Size)
\item 
void \mbox{\hyperlink{class_g_p_u_allocator_a539a3d2909976f47ca7d109522c23ece}{free}} (\mbox{\hyperlink{gpu__allocator_8h_aa7700da124206551c0f9d273152f13fb}{Gpu\+Mat}} $\ast$mat)
\end{DoxyCompactItemize}
\end{Indent}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
cuda\+Error\+\_\+t \mbox{\hyperlink{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb}{grow}} (void $\ast$$\ast$dev\+\_\+ptr, size\+\_\+t size)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \mbox{\hyperlink{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}{base\+\_\+ptr\+\_\+}}
\item 
void $\ast$ \mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\+\_\+ptr\+\_\+}}
\item 
size\+\_\+t \mbox{\hyperlink{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}{total\+\_\+size\+\_\+}}
\item 
size\+\_\+t \mbox{\hyperlink{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}{current\+\_\+size\+\_\+}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A simple linear allocator class to allocate storage for cv\+::\+Gpu\+Mat objects. This feature was added in Open\+CV 3.\+0. 

Definition at line 15 of file gpu\+\_\+allocator.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_g_p_u_allocator_aa98cb14ed329cc0dfd99982da0d9b671}\label{class_g_p_u_allocator_aa98cb14ed329cc0dfd99982da0d9b671}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{G\+P\+U\+Allocator()}{GPUAllocator()}}
{\footnotesize\ttfamily G\+P\+U\+Allocator\+::\+G\+P\+U\+Allocator (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 10 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
11     : \mbox{\hyperlink{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}{total\_size\_}}(size),
12       \mbox{\hyperlink{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}{current\_size\_}}(0)
13 \{
14     cudaError\_t rc = cudaMalloc(&\mbox{\hyperlink{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}{base\_ptr\_}}, \mbox{\hyperlink{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}{total\_size\_}});
15     \textcolor{keywordflow}{if} (rc != cudaSuccess)
16         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Could not allocate GPU memory"});
17 
18     \mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\_ptr\_}} = \mbox{\hyperlink{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}{base\_ptr\_}};
19 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_g_p_u_allocator_aacf971bf00e58690d44a52b9649d6e8d}\label{class_g_p_u_allocator_aacf971bf00e58690d44a52b9649d6e8d}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!````~G\+P\+U\+Allocator@{$\sim$\+G\+P\+U\+Allocator}}
\index{````~G\+P\+U\+Allocator@{$\sim$\+G\+P\+U\+Allocator}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{$\sim$\+G\+P\+U\+Allocator()}{~GPUAllocator()}}
{\footnotesize\ttfamily G\+P\+U\+Allocator\+::$\sim$\+G\+P\+U\+Allocator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 21 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
22 \{
23     cudaFree(\mbox{\hyperlink{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}{base\_ptr\_}});
24 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_g_p_u_allocator_abe0cecfd551e4824ed5522721dea76ca}\label{class_g_p_u_allocator_abe0cecfd551e4824ed5522721dea76ca}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!allocate@{allocate}}
\index{allocate@{allocate}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{allocate()}{allocate()}}
{\footnotesize\ttfamily bool G\+P\+U\+Allocator\+::allocate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{gpu__allocator_8h_aa7700da124206551c0f9d273152f13fb}{Gpu\+Mat}} $\ast$}]{mat,  }\item[{int}]{rows,  }\item[{int}]{cols,  }\item[{size\+\_\+t}]{elem\+Size }\end{DoxyParamCaption})}



Definition at line 50 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
51 \{
52     \textcolor{keywordtype}{int} padded\_width  = \mbox{\hyperlink{gpu__allocator_8cpp_a9b5b2c4640739b3faa5bdeae80af1e42}{align\_up}}(cols, 16);
53     \textcolor{keywordtype}{int} padded\_height = \mbox{\hyperlink{gpu__allocator_8cpp_a9b5b2c4640739b3faa5bdeae80af1e42}{align\_up}}(rows, 16);
54     \textcolor{keywordtype}{int} total\_size = elemSize * padded\_width * padded\_height;
55 
56     cudaError\_t status = \mbox{\hyperlink{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb}{grow}}((\textcolor{keywordtype}{void}**)&mat->data, total\_size);
57     \textcolor{keywordflow}{if} (status != cudaSuccess)
58         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
59 
60     mat->step = padded\_width * elemSize;
61     mat->refcount = \textcolor{keyword}{new} int;
62 
63     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
64 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_g_p_u_allocator_abe0cecfd551e4824ed5522721dea76ca_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_g_p_u_allocator_a539a3d2909976f47ca7d109522c23ece}\label{class_g_p_u_allocator_a539a3d2909976f47ca7d109522c23ece}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!free@{free}}
\index{free@{free}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily void G\+P\+U\+Allocator\+::free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{gpu__allocator_8h_aa7700da124206551c0f9d273152f13fb}{Gpu\+Mat}} $\ast$}]{mat }\end{DoxyParamCaption})}



Definition at line 66 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
67 \{
68     \textcolor{keyword}{delete} mat->refcount;
69 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb}\label{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!grow@{grow}}
\index{grow@{grow}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{grow()}{grow()}}
{\footnotesize\ttfamily cuda\+Error\+\_\+t G\+P\+U\+Allocator\+::grow (\begin{DoxyParamCaption}\item[{void $\ast$$\ast$}]{dev\+\_\+ptr,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 31 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
32 \{
33     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}{current\_size\_}} + size >= \mbox{\hyperlink{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}{total\_size\_}})
34     \textcolor{keywordflow}{return} cudaErrorMemoryAllocation;
35 
36     *dev\_ptr = \mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\_ptr\_}};
37     \textcolor{keywordtype}{size\_t} aligned\_size = \mbox{\hyperlink{gpu__allocator_8cpp_a9b5b2c4640739b3faa5bdeae80af1e42}{align\_up}}(size, \mbox{\hyperlink{gpu__allocator_8cpp_a450f9d8af07bfe2f313dbe3a78738a5e}{ALIGNMENT}});
38     \mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\_ptr\_}} = (\textcolor{keywordtype}{char}*)\mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\_ptr\_}} + aligned\_size;
39     \mbox{\hyperlink{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}{current\_size\_}} += aligned\_size;
40 
41     \textcolor{keywordflow}{return} cudaSuccess;
42 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=271pt]{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{class_g_p_u_allocator_a04e2127f194094b27fe2351551c7ddeb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_g_p_u_allocator_a4734a73038db3517f88a64e6b5f556ef}\label{class_g_p_u_allocator_a4734a73038db3517f88a64e6b5f556ef}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!reset@{reset}}
\index{reset@{reset}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void G\+P\+U\+Allocator\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 44 of file gpu\+\_\+allocator.\+cpp.


\begin{DoxyCode}
45 \{
46     \mbox{\hyperlink{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}{current\_ptr\_}} = \mbox{\hyperlink{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}{base\_ptr\_}};
47     \mbox{\hyperlink{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}{current\_size\_}} = 0;
48 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}\label{class_g_p_u_allocator_a3c2b70c86a428b4265771f9845307d0a}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!base\+\_\+ptr\+\_\+@{base\+\_\+ptr\+\_\+}}
\index{base\+\_\+ptr\+\_\+@{base\+\_\+ptr\+\_\+}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{base\+\_\+ptr\+\_\+}{base\_ptr\_}}
{\footnotesize\ttfamily void$\ast$ G\+P\+U\+Allocator\+::base\+\_\+ptr\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 38 of file gpu\+\_\+allocator.\+h.

\mbox{\Hypertarget{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}\label{class_g_p_u_allocator_a34ef0b84f1e5a510c4c968889b2dbf04}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!current\+\_\+ptr\+\_\+@{current\+\_\+ptr\+\_\+}}
\index{current\+\_\+ptr\+\_\+@{current\+\_\+ptr\+\_\+}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{current\+\_\+ptr\+\_\+}{current\_ptr\_}}
{\footnotesize\ttfamily void$\ast$ G\+P\+U\+Allocator\+::current\+\_\+ptr\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 39 of file gpu\+\_\+allocator.\+h.

\mbox{\Hypertarget{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}\label{class_g_p_u_allocator_a8d404f40928c431ced08c013189c8c58}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!current\+\_\+size\+\_\+@{current\+\_\+size\+\_\+}}
\index{current\+\_\+size\+\_\+@{current\+\_\+size\+\_\+}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{current\+\_\+size\+\_\+}{current\_size\_}}
{\footnotesize\ttfamily size\+\_\+t G\+P\+U\+Allocator\+::current\+\_\+size\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 41 of file gpu\+\_\+allocator.\+h.

\mbox{\Hypertarget{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}\label{class_g_p_u_allocator_a629bd3cca49d00f82cd6538e0d07d4ae}} 
\index{G\+P\+U\+Allocator@{G\+P\+U\+Allocator}!total\+\_\+size\+\_\+@{total\+\_\+size\+\_\+}}
\index{total\+\_\+size\+\_\+@{total\+\_\+size\+\_\+}!G\+P\+U\+Allocator@{G\+P\+U\+Allocator}}
\subsubsection{\texorpdfstring{total\+\_\+size\+\_\+}{total\_size\_}}
{\footnotesize\ttfamily size\+\_\+t G\+P\+U\+Allocator\+::total\+\_\+size\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 40 of file gpu\+\_\+allocator.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/\mbox{\hyperlink{gpu__allocator_8h}{gpu\+\_\+allocator.\+h}}\item 
D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/\mbox{\hyperlink{gpu__allocator_8cpp}{gpu\+\_\+allocator.\+cpp}}\end{DoxyCompactItemize}
