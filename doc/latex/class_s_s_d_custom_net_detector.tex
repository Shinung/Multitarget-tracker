\hypertarget{class_s_s_d_custom_net_detector}{}\section{S\+S\+D\+Custom\+Net\+Detector Class Reference}
\label{class_s_s_d_custom_net_detector}\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}


Detector class for custom caffe-\/ssd net.  




{\ttfamily \#include $<$S\+S\+D\+Custom\+Net\+Detector.\+h$>$}



Inheritance diagram for S\+S\+D\+Custom\+Net\+Detector\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{class_s_s_d_custom_net_detector__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for S\+S\+D\+Custom\+Net\+Detector\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_s_s_d_custom_net_detector__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_s_s_d_custom_net_detector_acb89dc911dd7b4b300a00789a76c8d8d}{S\+S\+D\+Custom\+Net\+Detector}} (bool collect\+Points, cv\+::\+U\+Mat \&color\+Frame)
\begin{DoxyCompactList}\small\item\em S\+S\+D\+Custom\+Net\+Detector\+::\+S\+S\+D\+Mobile\+Net\+Detector. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_s_s_d_custom_net_detector_af64774d3fabf485a810eee39f1a7d278}{$\sim$\+S\+S\+D\+Custom\+Net\+Detector}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_s_s_d_mobile_net_detector_aab4a87e950c5d0ea2631f8f7d521dc1c}{S\+S\+D\+Mobile\+Net\+Detector\+::$\sim$\+S\+S\+D\+Mobile\+Net\+Detector}}. \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{class_s_s_d_custom_net_detector_a2f228b0c7bbd679ff310158de119169b}{Init}} (const \mbox{\hyperlink{defines_8h_a81d657237a541d02f8eeefdd40191920}{config\+\_\+t}} \&config) override
\begin{DoxyCompactList}\small\item\em Initialize Detector and \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_s_s_d_custom_net_detector_abcd14fa695e46fab1eab8ea5524c0ba5}{Detect}} (cv\+::\+U\+Mat \&color\+Frame) override
\begin{DoxyCompactList}\small\item\em Detecting with \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_base_detector_ab459f4e77cf1110cc1ee84027f0f2a03}{Set\+Min\+Object\+Size}} (cv\+::\+Size min\+Object\+Size)
\begin{DoxyCompactList}\small\item\em Set\+Min\+Object\+Size. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \& \mbox{\hyperlink{class_base_detector_a52ac4b2feed15a47de84a69eb45c233f}{Get\+Detects}} () const
\begin{DoxyCompactList}\small\item\em Get\+Detects. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_base_detector_a20380b0980c6f262b0829f37fb89d2a7}{Collect\+Points}} (\mbox{\hyperlink{class_c_region}{C\+Region}} \&region)
\begin{DoxyCompactList}\small\item\em Collect\+Points. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_base_detector_a73c66f0d4dad263fcf65c09a6f6feda2}{Calc\+Motion\+Map}} (cv\+::\+Mat frame)
\begin{DoxyCompactList}\small\item\em Calc\+Motion\+Map. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\+\_\+regions}}
\item 
cv\+::\+Size \mbox{\hyperlink{class_base_detector_a651b938c89c94daac4763728637d90c9}{m\+\_\+min\+Object\+Size}}
\item 
bool \mbox{\hyperlink{class_base_detector_a403cbf784fcb960bdb7d080c86c4a2ea}{m\+\_\+collect\+Points}}
\item 
cv\+::\+Mat \mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\+\_\+motion\+Map}}
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{Custom\+S\+S\+D\+\_\+ctx}} \mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{Custom\+S\+S\+D\+\_\+ctx}}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}{Detect\+In\+Crop}} (cv\+::\+Mat color\+Frame, const cv\+::\+Rect \&crop, \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&tmp\+Regions)
\begin{DoxyCompactList}\small\item\em Making cropped images and fowarding \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{Custom\+S\+S\+D\+\_\+ctx}} $\ast$ \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}{m\+C\+TX}}
\begin{DoxyCompactList}\small\item\em A struct of Context\+Pool. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa40596238aee8ed737f132d5f842d65d}{In\+Width}}
\item 
int \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad1f675644d34cba9e15b9ae47a51bd53}{In\+Height}}
\item 
float \mbox{\hyperlink{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}{m\+\_\+\+W\+H\+Ratio}}
\item 
float \mbox{\hyperlink{class_s_s_d_custom_net_detector_a259cb4e414d34637f97b08cd9eaf7067}{m\+\_\+in\+Scale\+Factor}}
\item 
float \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}{m\+\_\+confidence\+Threshold}}
\item 
float \mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\+\_\+max\+Crop\+Ratio}}
\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{class_s_s_d_custom_net_detector_a888c6135df17be5eba5247851f6a5077}{m\+\_\+class\+Names}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Detector class for custom caffe-\/ssd net. 

This class was implemented to refer N\+V\+I\+D\+IA Gpu Rest Engine code

\begin{DoxySeeAlso}{See also}
\href{https://github.com/Shinung/gpu-rest-engine/tree/ssd_gre/caffe_ssd}{\tt forked G\+RE branch} 
\end{DoxySeeAlso}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Definition at line 13 of file S\+S\+D\+Custom\+Net\+Detector.\+h.



\subsection{Member Typedef Documentation}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}\label{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Custom\+S\+S\+D\+\_\+ctx@{Custom\+S\+S\+D\+\_\+ctx}}
\index{Custom\+S\+S\+D\+\_\+ctx@{Custom\+S\+S\+D\+\_\+ctx}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Custom\+S\+S\+D\+\_\+ctx}{CustomSSD\_ctx}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{Custom\+S\+S\+D\+\_\+ctx}} \mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{S\+S\+D\+Custom\+Net\+Detector\+::\+Custom\+S\+S\+D\+\_\+ctx}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 15 of file S\+S\+D\+Custom\+Net\+Detector.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_acb89dc911dd7b4b300a00789a76c8d8d}\label{class_s_s_d_custom_net_detector_acb89dc911dd7b4b300a00789a76c8d8d}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{S\+S\+D\+Custom\+Net\+Detector()}{SSDCustomNetDetector()}}
{\footnotesize\ttfamily S\+S\+D\+Custom\+Net\+Detector\+::\+S\+S\+D\+Custom\+Net\+Detector (\begin{DoxyParamCaption}\item[{bool}]{collect\+Points,  }\item[{cv\+::\+U\+Mat \&}]{color\+Frame }\end{DoxyParamCaption})}



S\+S\+D\+Custom\+Net\+Detector\+::\+S\+S\+D\+Mobile\+Net\+Detector. 


\begin{DoxyParams}{Parameters}
{\em collect\+Points} & \\
\hline
{\em gray} & \\
\hline
\end{DoxyParams}


Definition at line 113 of file S\+S\+D\+Custom\+Net\+Detector.\+cpp.


\begin{DoxyCode}
117     :
118     \mbox{\hyperlink{class_base_detector_a3c85e13a47dd472319dc43c60f0d102a}{BaseDetector}}(collectPoints, colorFrame),
119     \mbox{\hyperlink{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}{m\_WHRatio}}(1.\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}),
120     \mbox{\hyperlink{class_s_s_d_custom_net_detector_a259cb4e414d34637f97b08cd9eaf7067}{m\_inScaleFactor}}(0.007843\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}),
121     \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}{m\_confidenceThreshold}}(0.5\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}}),
122     \mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}}(2.0\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})
123 \{
124 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_af64774d3fabf485a810eee39f1a7d278}\label{class_s_s_d_custom_net_detector_af64774d3fabf485a810eee39f1a7d278}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!````~S\+S\+D\+Custom\+Net\+Detector@{$\sim$\+S\+S\+D\+Custom\+Net\+Detector}}
\index{````~S\+S\+D\+Custom\+Net\+Detector@{$\sim$\+S\+S\+D\+Custom\+Net\+Detector}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{$\sim$\+S\+S\+D\+Custom\+Net\+Detector()}{~SSDCustomNetDetector()}}
{\footnotesize\ttfamily S\+S\+D\+Custom\+Net\+Detector\+::$\sim$\+S\+S\+D\+Custom\+Net\+Detector (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_s_s_d_mobile_net_detector_aab4a87e950c5d0ea2631f8f7d521dc1c}{S\+S\+D\+Mobile\+Net\+Detector\+::$\sim$\+S\+S\+D\+Mobile\+Net\+Detector}}. 



Definition at line 129 of file S\+S\+D\+Custom\+Net\+Detector.\+cpp.


\begin{DoxyCode}
130 \{
131     \textcolor{keyword}{delete} \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}{mCTX}};
132 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_base_detector_a73c66f0d4dad263fcf65c09a6f6feda2}\label{class_base_detector_a73c66f0d4dad263fcf65c09a6f6feda2}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Calc\+Motion\+Map@{Calc\+Motion\+Map}}
\index{Calc\+Motion\+Map@{Calc\+Motion\+Map}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Calc\+Motion\+Map()}{CalcMotionMap()}}
{\footnotesize\ttfamily virtual void Base\+Detector\+::\+Calc\+Motion\+Map (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}



Calc\+Motion\+Map. 


\begin{DoxyParams}{Parameters}
{\em frame} & \\
\hline
\end{DoxyParams}


Reimplemented in \mbox{\hyperlink{class_motion_detector_aa4e606acafdc33a3104471903e449adc}{Motion\+Detector}}.



Definition at line 90 of file Base\+Detector.\+h.


\begin{DoxyCode}
91     \{
92         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}}.size() != frame.size())
93         \{
94             \mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}} = cv::Mat(frame.size(), CV\_32FC1, cv::Scalar(0, 0, 0));
95         \}
96 
97         cv::Mat foreground(\mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}}.size(), CV\_8UC1, cv::Scalar(0, 0, 0));
98         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& region : \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\_regions}})
99         \{
100 \textcolor{preprocessor}{#if (CV\_VERSION\_MAJOR < 4)}
101             cv::ellipse(foreground,
102                         cv::RotatedRect((region.m\_rect.tl() + region.m\_rect.br()) / 2, region.m\_rect.size()
      , 0),
103                                         cv::Scalar(255, 255, 255), CV\_FILLED);
104 \textcolor{preprocessor}{#else}
105             cv::ellipse(foreground,
106                         cv::RotatedRect((region.m\_rect.tl() + region.m\_rect.br()) / 2, region.m\_rect.size()
      , 0),
107                                         cv::Scalar(255, 255, 255), cv::FILLED);
108 \textcolor{preprocessor}{#endif}
109         \}
110 
111         cv::Mat normFor;
112         cv::normalize(foreground, normFor, 255, 0, cv::NORM\_MINMAX, \mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}}.type());
113 
114         \textcolor{keywordtype}{double} alpha = 0.95;
115         cv::addWeighted(\mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}}, alpha, normFor, 1 - alpha, 0, 
      \mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}});
116 
117         \textcolor{keyword}{const} \textcolor{keywordtype}{int} chans = frame.channels();
118 
119         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < frame.rows; ++y)
120         \{
121             uchar* imgPtr = frame.ptr(y);
122             \textcolor{keywordtype}{float}* moPtr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(\mbox{\hyperlink{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}{m\_motionMap}}.ptr(y));
123             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < frame.cols; ++x)
124             \{
125                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} ci = chans - 1; ci < chans; ++ci)
126                 \{
127                     imgPtr[ci] = cv::saturate\_cast<uchar>(imgPtr[ci] + moPtr[0]);
128                 \}
129                 imgPtr += chans;
130                 ++moPtr;
131             \}
132         \}
133     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_base_detector_a20380b0980c6f262b0829f37fb89d2a7}\label{class_base_detector_a20380b0980c6f262b0829f37fb89d2a7}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Collect\+Points@{Collect\+Points}}
\index{Collect\+Points@{Collect\+Points}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Collect\+Points()}{CollectPoints()}}
{\footnotesize\ttfamily virtual void Base\+Detector\+::\+Collect\+Points (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_c_region}{C\+Region}} \&}]{region }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}



Collect\+Points. 


\begin{DoxyParams}{Parameters}
{\em region} & \\
\hline
\end{DoxyParams}


Definition at line 64 of file Base\+Detector.\+h.


\begin{DoxyCode}
65     \{
66         \textcolor{keyword}{const} \textcolor{keywordtype}{int} yStep = 5;
67         \textcolor{keyword}{const} \textcolor{keywordtype}{int} xStep = 5;
68 
69         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.y, yStop = region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.y + region.
      \mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.height; y < yStop; y += yStep)
70         \{
71             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.x, xStop = region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.x + region.
      \mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.width; x < xStop; x += xStep)
72             \{
73                 \textcolor{keywordflow}{if} (region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.contains(cv::Point(x, y)))
74                 \{
75                     region.\mbox{\hyperlink{class_c_region_a65be08ae81a8d174d95ae35a2f7fb212}{m\_points}}.push\_back(cv::Point2f(static\_cast<float>(x), static\_cast<float>
      (y)));
76                 \}
77             \}
78         \}
79 
80         \textcolor{keywordflow}{if} (region.\mbox{\hyperlink{class_c_region_a65be08ae81a8d174d95ae35a2f7fb212}{m\_points}}.empty())
81         \{
82             region.\mbox{\hyperlink{class_c_region_a65be08ae81a8d174d95ae35a2f7fb212}{m\_points}}.push\_back(cv::Point2f(region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.x + 0.5f * region.
      \mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.width, region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.y + 0.5f * region.\mbox{\hyperlink{class_c_region_a6f68304e90428db829cc38792fa3e1e8}{m\_rect}}.height));
83         \}
84     \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_base_detector_a20380b0980c6f262b0829f37fb89d2a7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_abcd14fa695e46fab1eab8ea5524c0ba5}\label{class_s_s_d_custom_net_detector_abcd14fa695e46fab1eab8ea5524c0ba5}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Detect@{Detect}}
\index{Detect@{Detect}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Detect()}{Detect()}}
{\footnotesize\ttfamily void S\+S\+D\+Custom\+Net\+Detector\+::\+Detect (\begin{DoxyParamCaption}\item[{cv\+::\+U\+Mat \&}]{color\+Frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Detecting with \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. 

Forwarding \mbox{\hyperlink{class_s_s_d}{S\+SD}} net with cropped gray images.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em color\+Frame} & Always input gray scale image in this parameter because \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a4c3fe9ac68b5ef4f51d91a6322c5da02}{Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Gray\+Processing}} return only T\+R\+UE \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{class_base_detector_a9c9dedfffb7673fd2995f24bdb9ade18}{Base\+Detector}}.



Definition at line 212 of file S\+S\+D\+Custom\+Net\+Detector.\+cpp.


\begin{DoxyCode}
213 \{
214     \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\_regions}}.clear();
215 
216     \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\_t}} tmpRegions;
217 
218     cv::Mat colorMat = colorFrame.getMat(cv::ACCESS\_READ);
219 
220 \textcolor{preprocessor}{#ifdef NONCROP}
221     cv::Rect crop(0, 0, colorMat.cols, colorMat.rows);
222     \mbox{\hyperlink{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}{DetectInCrop}}(colorMat, crop, tmpRegions);
223 \textcolor{preprocessor}{#else}
224     \textcolor{keywordtype}{int} cropHeight = cvRound(\mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}} * \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad1f675644d34cba9e15b9ae47a51bd53}{InHeight}});
225     \textcolor{keywordtype}{int} cropWidth = cvRound(\mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}} * \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa40596238aee8ed737f132d5f842d65d}{InWidth}});
226 
227     \textcolor{keywordflow}{if} (colorFrame.cols / (\textcolor{keywordtype}{float})colorFrame.rows > \mbox{\hyperlink{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}{m\_WHRatio}})
228     \{
229         \textcolor{keywordflow}{if} (m\_maxCropRatio <= 0 || cropHeight >= colorFrame.rows)
230         \{
231             cropHeight = colorFrame.rows;
232         \}
233         cropWidth = cvRound(cropHeight * \mbox{\hyperlink{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}{m\_WHRatio}});
234     \}
235     \textcolor{keywordflow}{else}
236     \{
237         \textcolor{keywordflow}{if} (m\_maxCropRatio <= 0 || cropWidth >= colorFrame.cols)
238         \{
239             cropWidth = colorFrame.cols;
240         \}
241         cropHeight = cvRound(colorFrame.cols / \mbox{\hyperlink{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}{m\_WHRatio}});
242     \}
243 
244     cv::Rect crop(0, 0, cropWidth, cropHeight);
245 
246     \textcolor{keywordflow}{for} (; crop.y < colorMat.rows; crop.y += crop.height / 2)
247     \{
248         \textcolor{keywordtype}{bool} needBreakY = \textcolor{keyword}{false};
249         \textcolor{keywordflow}{if} (crop.y + crop.height >= colorMat.rows)
250         \{
251             crop.y = colorMat.rows - crop.height;
252             needBreakY = \textcolor{keyword}{true};
253         \}
254         \textcolor{keywordflow}{for} (crop.x = 0; crop.x < colorMat.cols; crop.x += crop.width / 2)
255         \{
256             \textcolor{keywordtype}{bool} needBreakX = \textcolor{keyword}{false};
257             \textcolor{keywordflow}{if} (crop.x + crop.width >= colorMat.cols)
258             \{
259                 crop.x = colorMat.cols - crop.width;
260                 needBreakX = \textcolor{keyword}{true};
261             \}
262 
263             \mbox{\hyperlink{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}{DetectInCrop}}(colorMat, crop, tmpRegions);
264 
265             \textcolor{keywordflow}{if} (needBreakX)
266             \{
267                 \textcolor{keywordflow}{break};
268             \}
269         \}
270         \textcolor{keywordflow}{if} (needBreakY)
271         \{
272             \textcolor{keywordflow}{break};
273         \}
274     \}
275 \textcolor{preprocessor}{#endif}
276 
277     nms3<CRegion>(tmpRegions, \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\_regions}}, 0.4f,
278         [](\textcolor{keyword}{const} \mbox{\hyperlink{class_c_region}{CRegion}}& reg) -> cv::Rect \{ \textcolor{keywordflow}{return} reg.m\_rect; \},
279         [](\textcolor{keyword}{const} \mbox{\hyperlink{class_c_region}{CRegion}}& reg) -> \textcolor{keywordtype}{float} \{ \textcolor{keywordflow}{return} reg.m\_confidence; \},
280         [](\textcolor{keyword}{const} \mbox{\hyperlink{class_c_region}{CRegion}}& reg) -> std::string \{ \textcolor{keywordflow}{return} reg.m\_type; \},
281         0, 0.f);
282 
283     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_base_detector_a403cbf784fcb960bdb7d080c86c4a2ea}{m\_collectPoints}})
284     \{
285         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}& region : \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\_regions}})
286         \{
287             \mbox{\hyperlink{class_base_detector_a20380b0980c6f262b0829f37fb89d2a7}{CollectPoints}}(region);
288         \}
289     \}
290 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_s_s_d_custom_net_detector_abcd14fa695e46fab1eab8ea5524c0ba5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}\label{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Detect\+In\+Crop@{Detect\+In\+Crop}}
\index{Detect\+In\+Crop@{Detect\+In\+Crop}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Detect\+In\+Crop()}{DetectInCrop()}}
{\footnotesize\ttfamily void S\+S\+D\+Custom\+Net\+Detector\+::\+Detect\+In\+Crop (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{color\+Frame,  }\item[{const cv\+::\+Rect \&}]{crop,  }\item[{\mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} \&}]{tmp\+Regions }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Making cropped images and fowarding \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. 

\mbox{\hyperlink{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d}{S\+S\+D\+Custom\+Net\+Detector\+::\+Detect\+In\+Crop}}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em color\+Frame} & \\
\hline
\mbox{\tt in}  & {\em crop} & \\
\hline
\mbox{\tt out}  & {\em tmp\+Regions} & \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000001}{Todo}}]It can be bottleneck with big image I think to improve process time if each cropped image forward to \mbox{\hyperlink{class_s_s_d}{S\+SD}} net, which live in context pool \end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
\href{https://github.com/Shinung/gpu-rest-engine/blob/ssd_gre/caffe_ssd/detection.cpp}{\tt detection\+\_\+inference function -\/ 149 line} 
\end{DoxySeeAlso}
\begin{DoxyAuthor}{Author}
Shinung
\end{DoxyAuthor}

\begin{DoxyParams}{Parameters}
{\em color\+Frame} & \\
\hline
{\em crop} & \\
\hline
{\em tmp\+Regions} & \\
\hline
\end{DoxyParams}


Definition at line 298 of file S\+S\+D\+Custom\+Net\+Detector.\+cpp.


\begin{DoxyCode}
299 \{
300     \textcolor{comment}{// get ssd instance from the pool}
301     \mbox{\hyperlink{class_scoped_context}{ScopedContext<ExecContext>}} context(\mbox{\hyperlink{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}{mCTX}}->\mbox{\hyperlink{struct_custom_s_s_d__ctx_a2259ed0cb6edcac14eddb309d061c7f3}{pool}});
302     \mbox{\hyperlink{class_s_s_d}{SSD}}* ssd = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_s_s_d}{SSD}}*\textcolor{keyword}{>}(context->CaffeClassifier());
303 
304     cv::Mat detectionMat = ssd->\mbox{\hyperlink{class_s_s_d_a68c76ba1ebc94d222c1fd624db060f62}{DetectAsMat}}(cv::Mat(colorFrame, crop));
305 
306     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < detectionMat.rows; ++i)
307     \{
308         \textcolor{keywordtype}{float} confidence = detectionMat.at<\textcolor{keywordtype}{float}>(i, 2);
309 
310         \textcolor{keywordflow}{if} (confidence > \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}{m\_confidenceThreshold}})
311         \{
312             \textcolor{keywordtype}{size\_t} objectClass = (size\_t)(detectionMat.at<\textcolor{keywordtype}{float}>(i, 1));
313 
314 \textcolor{preprocessor}{#ifdef NONCROP}
315             \textcolor{keywordtype}{int} xLeftBottom = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 3) * crop.width);
316             \textcolor{keywordtype}{int} yLeftBottom = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 4) * crop.height);
317             \textcolor{keywordtype}{int} xRightTop = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 5) * crop.width);
318             \textcolor{keywordtype}{int} yRightTop = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 6) * crop.height);
319 \textcolor{preprocessor}{#else}
320             \textcolor{keywordtype}{int} xLeftBottom = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 3) * crop.width) + crop.x;
321             \textcolor{keywordtype}{int} yLeftBottom = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 4) * crop.height) + crop.y;
322             \textcolor{keywordtype}{int} xRightTop = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 5) * crop.width) + crop.x;
323             \textcolor{keywordtype}{int} yRightTop = cvRound(detectionMat.at<\textcolor{keywordtype}{float}>(i, 6) * crop.height) + crop.y;
324 
325             \textcolor{keywordflow}{if} (xLeftBottom < 0 || yLeftBottom < 0 || xRightTop < 0 || yRightTop < 0)
326             \{
327                 \textcolor{keywordflow}{continue};
328             \}
329 \textcolor{preprocessor}{#endif}
330             CHECK\_LE(0, xLeftBottom) << \textcolor{stringliteral}{"raw: "} << detectionMat.at<\textcolor{keywordtype}{float}>(i, 3);
331             CHECK\_LE(0, yLeftBottom) << \textcolor{stringliteral}{"raw: "} << detectionMat.at<\textcolor{keywordtype}{float}>(i, 4);
332             CHECK\_LE(0, xRightTop) << \textcolor{stringliteral}{"raw: "} << detectionMat.at<\textcolor{keywordtype}{float}>(i, 5);
333             CHECK\_LE(0, yRightTop) << \textcolor{stringliteral}{"raw: "} << detectionMat.at<\textcolor{keywordtype}{float}>(i, 6);
334 
335             cv::Rect object(cv::Point(xLeftBottom, yLeftBottom), cv::Point(xRightTop, yRightTop));
336 
337             tmpRegions.push\_back(\mbox{\hyperlink{class_c_region}{CRegion}}(\textcolor{keywordtype}{object}, ssd->\mbox{\hyperlink{class_s_s_d_ac5c69f839f08bfa37dd33a66331f6fa3}{GetLabel}}(objectClass), confidence));
338         \}
339     \}
340 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_s_s_d_custom_net_detector_a9e87debb1ee3634724914830d6c2079d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_base_detector_a52ac4b2feed15a47de84a69eb45c233f}\label{class_base_detector_a52ac4b2feed15a47de84a69eb45c233f}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Get\+Detects@{Get\+Detects}}
\index{Get\+Detects@{Get\+Detects}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Get\+Detects()}{GetDetects()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}}\& Base\+Detector\+::\+Get\+Detects (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Get\+Detects. 

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line 55 of file Base\+Detector.\+h.


\begin{DoxyCode}
56     \{
57         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_base_detector_a409c20093acba261db8354ca72058fce}{m\_regions}};
58     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a2f228b0c7bbd679ff310158de119169b}\label{class_s_s_d_custom_net_detector_a2f228b0c7bbd679ff310158de119169b}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Init@{Init}}
\index{Init@{Init}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily bool S\+S\+D\+Custom\+Net\+Detector\+::\+Init (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{defines_8h_a81d657237a541d02f8eeefdd40191920}{config\+\_\+t}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Initialize Detector and \mbox{\hyperlink{class_s_s_d}{S\+SD}} net. 

This function was implemented to refer N\+V\+I\+D\+IA G\+RE code.


\begin{DoxyParams}{Parameters}
{\em config} & Setted values in \mbox{\hyperlink{class_custom_s_s_d_mobile_net_example_a5d5c5184860ac247bd2f562d6678e5e2}{Custom\+S\+S\+D\+Mobile\+Net\+Example\+::\+Init\+Tracker}} \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
Reference \href{https://github.com/Shinung/gpu-rest-engine/blob/ssd_gre/caffe_ssd/detection.cpp}{\tt code} 
\end{DoxySeeAlso}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Implements \mbox{\hyperlink{class_base_detector_a44c53608e9e4e3455ff553d987165260}{Base\+Detector}}.



Definition at line 134 of file S\+S\+D\+Custom\+Net\+Detector.\+cpp.


\begin{DoxyCode}
135 \{
136     \textcolor{keyword}{auto} confidenceThreshold = config.find(\textcolor{stringliteral}{"confidenceThreshold"});
137     \textcolor{keywordflow}{if} (confidenceThreshold != config.end())
138     \{
139         \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}{m\_confidenceThreshold}} = std::stof(confidenceThreshold->second);
140     \}
141 
142     \textcolor{keyword}{auto} maxCropRatio = config.find(\textcolor{stringliteral}{"maxCropRatio"});
143     \textcolor{keywordflow}{if} (maxCropRatio != config.end())
144     \{
145         \mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}} = std::stof(maxCropRatio->second);
146         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}} < 1.\mbox{\hyperlink{rings_8cpp_a77369fc4d5326a16d2c603e032023528}{f}})
147         \{
148             \mbox{\hyperlink{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}{m\_maxCropRatio}} = 1.f;
149         \}
150     \}
151 
152     \textcolor{keywordflow}{try}
153     \{
154         \textcolor{keywordtype}{int} device\_count;
155         cudaError\_t st = cudaGetDeviceCount(&device\_count);
156         \textcolor{keywordflow}{if} (st != cudaSuccess)
157         \{
158             \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"could not list CUDA devices"});
159         \}
160 
161         \mbox{\hyperlink{class_queue}{ContextPool<ExecContext>}} pool;
162         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} dev = 0; dev < device\_count; ++dev)
163         \{
164             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_exec_context_ae0873cef48079986d31639654f915bd0}{ExecContext::IsCompatible}}(dev))
165             \{
166                 LOG(ERROR) << \textcolor{stringliteral}{"Skipping device: "} << dev;
167                 \textcolor{keywordflow}{continue};
168             \}
169 
170             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{_s_s_d_custom_net_detector_8cpp_a123a352b9596fc7d507e96fbe9c44f41}{kContextsPerDevice}}; ++i)
171             \{
172                 std::unique\_ptr<ExecContext> context(
173                         \textcolor{keyword}{new} \mbox{\hyperlink{class_exec_context}{ExecContext}}(
174                                 config.find(\textcolor{stringliteral}{"modelConfiguration"})->second,
175                                 config.find(\textcolor{stringliteral}{"modelBinary"})->second,
176                                 \textcolor{stringliteral}{""},
177                                 config.find(\textcolor{stringliteral}{"meanValue"})->second,
178                                 config.find(\textcolor{stringliteral}{"labelMap"})->second,
179                                 \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}{m\_confidenceThreshold}},
180                                 dev
181                         )
182                 );
183                 pool.\mbox{\hyperlink{class_queue_ace62235edaffc6f375d040c32c0ab651}{Push}}(std::move(context));
184             \}
185         \}
186 
187         \textcolor{keywordflow}{if} (pool.\mbox{\hyperlink{class_queue_a5e59f2b97d5dea8ad0314b6239816055}{Size}}() == 0)
188         \{
189             \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"no suitable CUDA device"});
190         \}
191         \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}{mCTX}} = \textcolor{keyword}{new} \mbox{\hyperlink{struct_custom_s_s_d__ctx}{CustomSSD\_ctx}}\{ std::move(pool) \};
192 
193         \{
194             \mbox{\hyperlink{class_scoped_context}{ScopedContext<ExecContext>}} context(\mbox{\hyperlink{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}{mCTX}}->
      \mbox{\hyperlink{struct_custom_s_s_d__ctx_a2259ed0cb6edcac14eddb309d061c7f3}{pool}});
195             \mbox{\hyperlink{class_s_s_d}{SSD}}* ssd = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_s_s_d}{SSD}}*\textcolor{keyword}{>}(context->CaffeClassifier());
196             \mbox{\hyperlink{class_s_s_d_custom_net_detector_aa40596238aee8ed737f132d5f842d65d}{InWidth}} = ssd->\mbox{\hyperlink{class_s_s_d_a20f17f5f9dbdc816f7b3ae4e30428427}{GetInputGeometry}}().width;
197             \mbox{\hyperlink{class_s_s_d_custom_net_detector_ad1f675644d34cba9e15b9ae47a51bd53}{InHeight}} = ssd->\mbox{\hyperlink{class_s_s_d_a20f17f5f9dbdc816f7b3ae4e30428427}{GetInputGeometry}}().height;
198         \}
199 
200         \textcolor{comment}{/* Successful CUDA calls can set errno. */}
201         errno = 0;
202         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
203     \}
204     \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::invalid\_argument& ex)
205     \{
206         LOG(ERROR) << \textcolor{stringliteral}{"exception: "} << ex.what();
207         errno = EINVAL;
208         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
209     \}
210 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_s_s_d_custom_net_detector_a2f228b0c7bbd679ff310158de119169b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_base_detector_ab459f4e77cf1110cc1ee84027f0f2a03}\label{class_base_detector_ab459f4e77cf1110cc1ee84027f0f2a03}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!Set\+Min\+Object\+Size@{Set\+Min\+Object\+Size}}
\index{Set\+Min\+Object\+Size@{Set\+Min\+Object\+Size}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{Set\+Min\+Object\+Size()}{SetMinObjectSize()}}
{\footnotesize\ttfamily void Base\+Detector\+::\+Set\+Min\+Object\+Size (\begin{DoxyParamCaption}\item[{cv\+::\+Size}]{min\+Object\+Size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Set\+Min\+Object\+Size. 


\begin{DoxyParams}{Parameters}
{\em min\+Object\+Size} & \\
\hline
\end{DoxyParams}


Definition at line 46 of file Base\+Detector.\+h.


\begin{DoxyCode}
47     \{
48         \mbox{\hyperlink{class_base_detector_a651b938c89c94daac4763728637d90c9}{m\_minObjectSize}} = minObjectSize;
49     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_s_s_d_custom_net_detector_ad1f675644d34cba9e15b9ae47a51bd53}\label{class_s_s_d_custom_net_detector_ad1f675644d34cba9e15b9ae47a51bd53}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!In\+Height@{In\+Height}}
\index{In\+Height@{In\+Height}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{In\+Height}{InHeight}}
{\footnotesize\ttfamily int S\+S\+D\+Custom\+Net\+Detector\+::\+In\+Height\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 71 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_aa40596238aee8ed737f132d5f842d65d}\label{class_s_s_d_custom_net_detector_aa40596238aee8ed737f132d5f842d65d}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!In\+Width@{In\+Width}}
\index{In\+Width@{In\+Width}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{In\+Width}{InWidth}}
{\footnotesize\ttfamily int S\+S\+D\+Custom\+Net\+Detector\+::\+In\+Width\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 70 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a888c6135df17be5eba5247851f6a5077}\label{class_s_s_d_custom_net_detector_a888c6135df17be5eba5247851f6a5077}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+class\+Names@{m\+\_\+class\+Names}}
\index{m\+\_\+class\+Names@{m\+\_\+class\+Names}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+class\+Names}{m\_classNames}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ S\+S\+D\+Custom\+Net\+Detector\+::m\+\_\+class\+Names\hspace{0.3cm}{\ttfamily [private]}}

Container for objects label 

Definition at line 76 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_base_detector_a403cbf784fcb960bdb7d080c86c4a2ea}\label{class_base_detector_a403cbf784fcb960bdb7d080c86c4a2ea}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+collect\+Points@{m\+\_\+collect\+Points}}
\index{m\+\_\+collect\+Points@{m\+\_\+collect\+Points}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+collect\+Points}{m\_collectPoints}}
{\footnotesize\ttfamily bool Base\+Detector\+::m\+\_\+collect\+Points\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 140 of file Base\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}\label{class_s_s_d_custom_net_detector_aa35b98cccf01cd5e9843a1e0c281a03d}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+confidence\+Threshold@{m\+\_\+confidence\+Threshold}}
\index{m\+\_\+confidence\+Threshold@{m\+\_\+confidence\+Threshold}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+confidence\+Threshold}{m\_confidenceThreshold}}
{\footnotesize\ttfamily float S\+S\+D\+Custom\+Net\+Detector\+::m\+\_\+confidence\+Threshold\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 74 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a259cb4e414d34637f97b08cd9eaf7067}\label{class_s_s_d_custom_net_detector_a259cb4e414d34637f97b08cd9eaf7067}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+in\+Scale\+Factor@{m\+\_\+in\+Scale\+Factor}}
\index{m\+\_\+in\+Scale\+Factor@{m\+\_\+in\+Scale\+Factor}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+in\+Scale\+Factor}{m\_inScaleFactor}}
{\footnotesize\ttfamily float S\+S\+D\+Custom\+Net\+Detector\+::m\+\_\+in\+Scale\+Factor\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 73 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}\label{class_s_s_d_custom_net_detector_a41f65cc3327a94be76280cb2ad7f46f8}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+max\+Crop\+Ratio@{m\+\_\+max\+Crop\+Ratio}}
\index{m\+\_\+max\+Crop\+Ratio@{m\+\_\+max\+Crop\+Ratio}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+max\+Crop\+Ratio}{m\_maxCropRatio}}
{\footnotesize\ttfamily float S\+S\+D\+Custom\+Net\+Detector\+::m\+\_\+max\+Crop\+Ratio\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 75 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_base_detector_a651b938c89c94daac4763728637d90c9}\label{class_base_detector_a651b938c89c94daac4763728637d90c9}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+min\+Object\+Size@{m\+\_\+min\+Object\+Size}}
\index{m\+\_\+min\+Object\+Size@{m\+\_\+min\+Object\+Size}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+min\+Object\+Size}{m\_minObjectSize}}
{\footnotesize\ttfamily cv\+::\+Size Base\+Detector\+::m\+\_\+min\+Object\+Size\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 138 of file Base\+Detector.\+h.

\mbox{\Hypertarget{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}\label{class_base_detector_a45a2d54a0b69e271aa5c44ee301682b7}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+motion\+Map@{m\+\_\+motion\+Map}}
\index{m\+\_\+motion\+Map@{m\+\_\+motion\+Map}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+motion\+Map}{m\_motionMap}}
{\footnotesize\ttfamily cv\+::\+Mat Base\+Detector\+::m\+\_\+motion\+Map\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 142 of file Base\+Detector.\+h.

\mbox{\Hypertarget{class_base_detector_a409c20093acba261db8354ca72058fce}\label{class_base_detector_a409c20093acba261db8354ca72058fce}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+regions@{m\+\_\+regions}}
\index{m\+\_\+regions@{m\+\_\+regions}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+regions}{m\_regions}}
{\footnotesize\ttfamily \mbox{\hyperlink{defines_8h_a01db0de56a20f4342820a093c5154536}{regions\+\_\+t}} Base\+Detector\+::m\+\_\+regions\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 136 of file Base\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}\label{class_s_s_d_custom_net_detector_a31c168d1239dfd0c485afeea9a88a2e9}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+\_\+\+W\+H\+Ratio@{m\+\_\+\+W\+H\+Ratio}}
\index{m\+\_\+\+W\+H\+Ratio@{m\+\_\+\+W\+H\+Ratio}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+\_\+\+W\+H\+Ratio}{m\_WHRatio}}
{\footnotesize\ttfamily float S\+S\+D\+Custom\+Net\+Detector\+::m\+\_\+\+W\+H\+Ratio\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 72 of file S\+S\+D\+Custom\+Net\+Detector.\+h.

\mbox{\Hypertarget{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}\label{class_s_s_d_custom_net_detector_ad0d9609d8e5b22e28cae854f0ac06058}} 
\index{S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}!m\+C\+TX@{m\+C\+TX}}
\index{m\+C\+TX@{m\+C\+TX}!S\+S\+D\+Custom\+Net\+Detector@{S\+S\+D\+Custom\+Net\+Detector}}
\subsubsection{\texorpdfstring{m\+C\+TX}{mCTX}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_s_s_d_custom_net_detector_a979c7a383a8951d8d549bdf9e1045aae}{Custom\+S\+S\+D\+\_\+ctx}}$\ast$ S\+S\+D\+Custom\+Net\+Detector\+::m\+C\+TX\hspace{0.3cm}{\ttfamily [private]}}



A struct of Context\+Pool. 

I just followed \href{https://github.com/NVIDIA/gpu-rest-engine}{\tt N\+V\+I\+D\+IA G\+RE} codes although It\textquotesingle{}s not necessary for multi-\/threads logic in here.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{common_8h}{common.\+h}} 
\end{DoxySeeAlso}
\begin{DoxyAuthor}{Author}
Shinung 
\end{DoxyAuthor}


Definition at line 68 of file S\+S\+D\+Custom\+Net\+Detector.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/\mbox{\hyperlink{_s_s_d_custom_net_detector_8h}{S\+S\+D\+Custom\+Net\+Detector.\+h}}\item 
D\+:/\+Roy/\+Git\+Hub/\+Multitarget-\/tracker/\+Detector/\mbox{\hyperlink{_s_s_d_custom_net_detector_8cpp}{S\+S\+D\+Custom\+Net\+Detector.\+cpp}}\end{DoxyCompactItemize}
