\hypertarget{namespacerun-code}{}\section{run-\/code Namespace Reference}
\label{namespacerun-code}\index{run-\/code@{run-\/code}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacerun-code_a133159db4bd6772312bbf5daa57bd0b3}{run\+\_\+code}} (detector, threshold, video\+\_\+num)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
list \mbox{\hyperlink{namespacerun-code_a964a9f5de3531be378abf4081befc9d2}{detector\+\_\+list}} = \mbox{[}\textquotesingle{}yolo\textquotesingle{}, \textquotesingle{}ssd\textquotesingle{}, \textquotesingle{}dw\textquotesingle{}\mbox{]}
\item 
string \mbox{\hyperlink{namespacerun-code_a8fd3f499f581f73e709f1dccdcf91b3f}{codec}} = \textquotesingle{}h264\textquotesingle{}
\item 
string \mbox{\hyperlink{namespacerun-code_ac7f7fa370ecddff28d73a3ed6c0375e5}{dst\+\_\+ext}} = \textquotesingle{}h264\textquotesingle{} else \textquotesingle{}avi\textquotesingle{}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespacerun-code_a133159db4bd6772312bbf5daa57bd0b3}\label{namespacerun-code_a133159db4bd6772312bbf5daa57bd0b3}} 
\index{run-\/code@{run-\/code}!run\+\_\+code@{run\+\_\+code}}
\index{run\+\_\+code@{run\+\_\+code}!run-\/code@{run-\/code}}
\subsubsection{\texorpdfstring{run\+\_\+code()}{run\_code()}}
{\footnotesize\ttfamily def run-\/code.\+run\+\_\+code (\begin{DoxyParamCaption}\item[{}]{detector,  }\item[{}]{threshold,  }\item[{}]{video\+\_\+num }\end{DoxyParamCaption})}



Definition at line 12 of file run-\/code.\+py.


\begin{DoxyCode}
12 \textcolor{keyword}{def }\mbox{\hyperlink{namespacerun-code_a133159db4bd6772312bbf5daa57bd0b3}{run\_code}}(detector, threshold, video\_num):
13 
14     \textcolor{comment}{# ---------------- main setting ---------------- #}
15 
16     \textcolor{comment}{# base path setting}
17     base\_video\_path = os.path.join(\textcolor{stringliteral}{'D:\(\backslash\)\(\backslash\)Roy\(\backslash\)\(\backslash\)GitHub\(\backslash\)\(\backslash\)Multitarget-tracker\(\backslash\)\(\backslash\)data\(\backslash\)\(\backslash\)'})
18     base\_code\_path = os.path.join(\textcolor{stringliteral}{'D:\(\backslash\)\(\backslash\)Roy\(\backslash\)\(\backslash\)GitHub\(\backslash\)\(\backslash\)Multitarget-tracker\(\backslash\)\(\backslash\)'})
19 
20     \textcolor{comment}{# execute file setting}
21     exefile = \textcolor{stringliteral}{'MultitargetTracker\_\{0\}\_\{1:.1f\}.exe'}.format(detector, threshold)
22 
23     \textcolor{comment}{# sorce video folder name setting}
24     src\_folder\_name = \textcolor{stringliteral}{'videos'}
25     src\_video\_name = \textcolor{stringliteral}{'video\_\{0\}.avi'}.format(video\_num)
26 
27     \textcolor{comment}{# ------------- end of main setting ------------- #}
28 
29     \textcolor{comment}{# execute file error checking}
30     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isfile(exefile):
31         adding\_path = os.path.join(os.getcwd(), \textcolor{stringliteral}{'build'}, \textcolor{stringliteral}{'Release'})
32         exefile = os.path.join(adding\_path, exefile)
33         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isfile(exefile):
34             print(\textcolor{stringliteral}{"ERROR: There's no \{\} file in current path"}.format(exefile))
35             exit(-1)
36 
37     \textcolor{comment}{# detector keyword checking}
38     \textcolor{keywordflow}{if} detector \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} detector\_list:
39         print(\textcolor{stringliteral}{"ERROR: There's no \{\} detector in my list"}.format(detector))
40         exit(-1)
41     \textcolor{keywordflow}{elif} detector==\textcolor{stringliteral}{'yolo'}:
42         example = 5
43         extra\_setting = \textcolor{stringliteral}{''}
44 
45     \textcolor{keywordflow}{elif} detector == \textcolor{stringliteral}{'ssd'}:
46         example = 6
47 
48         \textcolor{comment}{# extra setting for ssd}
49         base\_data\_path = os.path.join(base\_code\_path, \textcolor{stringliteral}{'data'})
50         deploy\_name = \textcolor{stringliteral}{'ssd\_ids\_trained\(\backslash\)\(\backslash\)Deploy\_Near.prototxt'}
51         weight\_name = \textcolor{stringliteral}{'ssd\_ids\_trained\(\backslash\)\(\backslash\)Near.caffemodel'}
52         labelmap\_name = \textcolor{stringliteral}{'ssd\_ids\_trained\(\backslash\)\(\backslash\)labelmap\_Near.prototxt'}
53 
54         deploy\_path = os.path.join(base\_data\_path, deploy\_name)
55         weight\_path = os.path.join(base\_data\_path, weight\_name)
56         labelmap\_path = os.path.join(base\_data\_path, labelmap\_name)
57 
58         extra\_setting = \textcolor{stringliteral}{"--deploy=\{0\} --weights=\{1\} --label-map=\{2\}"}.format(deploy\_path, weight\_path, 
      labelmap\_path)
59 
60     \textcolor{keywordflow}{elif} detector == \textcolor{stringliteral}{'dw'}:
61         example = 6
62 
63         \textcolor{comment}{# extra setting for ssd dw}
64         base\_data\_path = os.path.join(base\_code\_path, \textcolor{stringliteral}{'data'})
65         deploy\_name = \textcolor{stringliteral}{'ssd\_mobilenet\_dw\(\backslash\)\(\backslash\)MobileNetSSD\_deploy.prototxt'}
66         weight\_name = \textcolor{stringliteral}{'ssd\_mobilenet\_dw\(\backslash\)\(\backslash\)SSD\_MOBILENET\_V1\_DW\_VOC\_iter\_120000.caffemodel'}
67         labelmap\_name = \textcolor{stringliteral}{'ssd\_mobilenet\_dw\(\backslash\)\(\backslash\)labelmap\_voc.prototxt'}
68 
69         deploy\_path = os.path.join(base\_data\_path, deploy\_name)
70         weight\_path = os.path.join(base\_data\_path, weight\_name)
71         labelmap\_path = os.path.join(base\_data\_path, labelmap\_name)
72 
73         extra\_setting = \textcolor{stringliteral}{"--deploy=\{0\} --weights=\{1\} --label-map=\{2\}"}.format(deploy\_path, weight\_path, 
      labelmap\_path)
74 
75     \textcolor{comment}{# base video path error checking}
76     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(base\_video\_path):
77         print(\textcolor{stringliteral}{"ERROR: There's no folder : "}.format(base\_video\_path))
78         exit(-1)
79 
80     \textcolor{comment}{# sorce video path setting from sorce video name}
81     src\_folder\_path = os.path.join(base\_video\_path, src\_folder\_name)
82     src\_video\_path = os.path.join(src\_folder\_path, src\_video\_name)
83 
84     \textcolor{comment}{# sorce video path error checking}
85     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(src\_folder\_path):
86         print(\textcolor{stringliteral}{"ERROR: There's no folder : "}.format(src\_folder\_path))
87         exit(-1)
88     \textcolor{comment}{# sorce video file non-exist case checking}
89     \textcolor{keywordflow}{elif} \textcolor{keywordflow}{not} os.path.isfile(src\_video\_path):
90         print(\textcolor{stringliteral}{"ERROR: There's no video file : "}.format(src\_video\_path))
91         exit(-1)
92 
93     dst\_folder\_name = src\_folder\_name + \textcolor{stringliteral}{'\_tracker\_\{0\}\_\{1:.1f\}'}.format(detector, threshold)
94     dst\_folder\_path = os.path.join(base\_video\_path, dst\_folder\_name)
95     dst\_video\_name = \textcolor{stringliteral}{'video\_\{0\}\_\{1\}\_\{2:.1f\}.\{3\}'}.format(video\_num, detector, threshold, dst\_ext)
96     dst\_video\_path = os.path.join(dst\_folder\_path, dst\_video\_name)
97 
98     tmp\_dst\_foler\_path = os.path.join(dst\_folder\_path, \textcolor{stringliteral}{'temp'})
99     tmp\_dst\_video\_path = os.path.join(tmp\_dst\_foler\_path, dst\_video\_name)
100 
101 
102     \textcolor{comment}{# destination video folder checking.}
103     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(dst\_folder\_path):
104         print(\textcolor{stringliteral}{"warning: There's no folder : "}.format(dst\_folder\_path))
105         os.makedirs(dst\_folder\_path)
106         print(\textcolor{stringliteral}{"So I created this one.."})
107 
108     \textcolor{comment}{# make temp folder for converting video}
109     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(tmp\_dst\_foler\_path):
110         os.makedirs(tmp\_dst\_foler\_path)
111 
112     \textcolor{comment}{# make command and combine with extra setting}
113     command = \textcolor{stringliteral}{"\{0\} \{1\} --example=\{2\} --out=\{3\} --end\_delay=100 "}.format(exefile, src\_video\_path, example, 
      tmp\_dst\_video\_path)
114     full\_command = command + extra\_setting
115 
116     \textcolor{comment}{# execute the full command}
117     \textcolor{keywordflow}{try}:
118         print(full\_command)
119         os.system(full\_command)
120     \textcolor{keywordflow}{except}:
121         print(\textcolor{stringliteral}{"Command execute error !"})
122 
123     \textcolor{comment}{# move the video file to out of the temp folder and delete temp folder}
124     \textcolor{keywordflow}{try}:
125         \textcolor{keywordflow}{if} os.path.isfile(tmp\_dst\_video\_path):
126             \textcolor{keywordflow}{if} os.path.isfile(dst\_video\_path):
127                 os.remove(dst\_video\_path)
128             shutil.move(tmp\_dst\_video\_path, dst\_video\_path)
129             os.rmdir(tmp\_dst\_foler\_path)
130     \textcolor{keywordflow}{except}:
131         print(\textcolor{stringliteral}{"Unknown error !"})
132 
133 
134 
135 
136 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespacerun-code_a8fd3f499f581f73e709f1dccdcf91b3f}\label{namespacerun-code_a8fd3f499f581f73e709f1dccdcf91b3f}} 
\index{run-\/code@{run-\/code}!codec@{codec}}
\index{codec@{codec}!run-\/code@{run-\/code}}
\subsubsection{\texorpdfstring{codec}{codec}}
{\footnotesize\ttfamily string run-\/code.\+codec = \textquotesingle{}h264\textquotesingle{}}



Definition at line 9 of file run-\/code.\+py.

\mbox{\Hypertarget{namespacerun-code_a964a9f5de3531be378abf4081befc9d2}\label{namespacerun-code_a964a9f5de3531be378abf4081befc9d2}} 
\index{run-\/code@{run-\/code}!detector\+\_\+list@{detector\+\_\+list}}
\index{detector\+\_\+list@{detector\+\_\+list}!run-\/code@{run-\/code}}
\subsubsection{\texorpdfstring{detector\+\_\+list}{detector\_list}}
{\footnotesize\ttfamily list run-\/code.\+detector\+\_\+list = \mbox{[}\textquotesingle{}yolo\textquotesingle{}, \textquotesingle{}ssd\textquotesingle{}, \textquotesingle{}dw\textquotesingle{}\mbox{]}}



Definition at line 8 of file run-\/code.\+py.

\mbox{\Hypertarget{namespacerun-code_ac7f7fa370ecddff28d73a3ed6c0375e5}\label{namespacerun-code_ac7f7fa370ecddff28d73a3ed6c0375e5}} 
\index{run-\/code@{run-\/code}!dst\+\_\+ext@{dst\+\_\+ext}}
\index{dst\+\_\+ext@{dst\+\_\+ext}!run-\/code@{run-\/code}}
\subsubsection{\texorpdfstring{dst\+\_\+ext}{dst\_ext}}
{\footnotesize\ttfamily string run-\/code.\+dst\+\_\+ext = \textquotesingle{}h264\textquotesingle{} else \textquotesingle{}avi\textquotesingle{}}



Definition at line 10 of file run-\/code.\+py.

